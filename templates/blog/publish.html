<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="baidu-site-verification" content="TcPgCnDcOJ" />
    <link
      rel="apple-touch-icon"
      href="https://www.django.cn/static/images/icon-touch.png"
    />
    <link
      rel="icon"
      sizes="192x192"
      href="https://www.django.cn/static/images/icon-touch.png"
    />
    <link
      rel="shortcut icon"
      href="https://www.django.cn/static/images/favicon.ico"
    />

    <title>发表帖子-Django,Django中文网！</title>

    <meta name="theme-color" content="#ffffff" />
    <link href="static/css/fonts.css" rel="stylesheet" />
    <link href="static/css/bootstrap.min.css" rel="stylesheet" />
    <link href="static/css/toastr.min.css" rel="stylesheet" />
    <link href="static/css/app.css" rel="stylesheet" />
    <link href="static/css/font-awesome.min.css" rel="stylesheet" />

    <script src="static/js/jquery.min.js"></script>
    <script src="static/js/bootstrap.min.js"></script>
    <script src="static/js/highlight.min.js"></script>
    <script src="static/js/toastr.min.js"></script>

    <script>
      var _hmt = _hmt || [];
      (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?9b0ccd50ff8935f331889174a8280dc2";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
  </head>
  <body>
    <div
      class="modal fade"
      id="confirm-delete"
      tabindex="-1"
      role="dialog"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-hidden="true"
            >
              ×
            </button>
            <div style="text-align: center; font-size: 20px">确定删除?</div>
          </div>
          <div class="modal-footer">
            <form
              action="/comment/"
              method="POST"
              id="delete_comment"
              style="float: left"
            >
              <input
                type="hidden"
                name="csrfmiddlewaretoken"
                value="ITVJGqFwyv7OoX9zmMcUO7izPh551ktqaehpwbi177DwkWt6OXJ7dTxUIV83Auy7"
              />
              <input type="hidden" name="tag" />
              <input type="hidden" name="aid" />
              <input type="hidden" name="id" />
              <input type="hidden" name="method" value="delete" />
              <input
                type="button"
                class="btn btn-danger btn-ok"
                id="btn_delete_comment"
                value="删除"
              />
            </form>
            <!-- <a class="btn btn-danger btn-ok"><span>删除</span></a> -->
            <button type="button" class="btn btn-default" data-dismiss="modal">
              <span>取消</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="page__wrapper page--landing">
      <header class="header--main animate-search no-background-xs">
        <div class="container-fluid">
          <nav class="nav--main">
            <div class="nav__logo">
              <a href="index1.html">
                <span>Django中文网</span>
              </a>
            </div>

            <ul class="nav__items nav__items--right">
              <li class="nav__item">
                <a href="search.html" class="search-trigger icon-magnifier"></a>
              </li>
              <li id="login" class="nav__item">
                <a href="login.html"> 登录 </a>
              </li>
              <li id="register" class="nav__item">
                <a href="register.html">
                  <span class="btn btn-success">注册</span>
                </a>
              </li>
            </ul>

            <ul class="nav__items nav__items--left">
              <li class="nav__item nav__item--main">
                <a href="article.html" class="articles"> 文章 </a>
              </li>
              <li class="nav__item nav__item--main">
                <a href="course.html" class="posts"> 教程 </a>
              </li>
              <li class="nav__item nav__item--main">
                <a href="video.html" class="posts"> 视频 </a>
              </li>
              <li class="nav__item nav__item--main">
                <a href="forum.html" class="posts"> 社区 </a>
              </li>
            </ul>
          </nav>
          <!-- .nav--main -->
        </div>

        <a href="#0" class="nav-trigger icon-menu"></a>

        <div id="search" class="main-search">
          <div class="container-fluid">
            <form
              id="search-form-top"
              class="form__search"
              action="/search/"
              method="GET"
            >
              <input
                type="search"
                name="search"
                placeholder="Search..."
                value=""
                autocomplete="off"
                required=""
              />
            </form>

            <div class="search-suggestions"></div>
            <a href="#0" class="close text-replace">Close Form</a>
          </div>
        </div>
        <!-- .main-search -->
      </header>

      <div class="cover-layer"></div>
      <!-- cover main content when search form is open -->

      <div>
        <div
          class="modal fade"
          tabindex="-1"
          role="dialog"
          aria-labelledby="mySmallModalLabel"
          id="error_input"
        >
          <div class="modal-dialog modal-sm" role="document">
            <div class="modal-content"></div>
          </div>
        </div>
      </div>
      <style>
        .modal-content {
          height: 80px;
          line-height: 80px;
          text-align: center;
          font-size: 18px;
        }
      </style>
      <script type="text/javascript">
        $("#error_input").modal("");
        // alert('good')
      </script>

      <main class="main-content" id="main_content">
        <div class="content-wrapper">
          <div class="container-fluid">
            <div class="row">
              <div class="col-md-8 col-md-offset-2">
                <div class="section">
                  <div class="panel-heading">
                    <i class="icon-pencil icon-form"></i>
                    <h2>创建帖子</h2>
                  </div>
                  <div class="panel-body">
                    <form
                      class="form-horizontal form--flex"
                      role="form"
                      method="POST"
                      action="/forum/add/"
                      id="forum_form"
                    >
                      <input
                        type="hidden"
                        name="csrfmiddlewaretoken"
                        value="ITVJGqFwyv7OoX9zmMcUO7izPh551ktqaehpwbi177DwkWt6OXJ7dTxUIV83Auy7"
                      />
                      <div class="form-group">
                        <div class="controls">
                          <input
                            id="title"
                            type="text"
                            class="form-control"
                            name="title"
                            value=""
                            required=""
                          />
                          <label for="title" data-content="title">标题</label>
                        </div>
                      </div>
                      <div class="form-group">
                        <div class="controls" id="forum_select">
                          <select
                            id="category-select"
                            name="category"
                            class="form-control"
                          >
                            <option value="" disabled="" selected="selected">
                              选择分类
                            </option>

                            <option value="Django">Django</option>

                            <option value="错误收集">错误收集</option>

                            <option value="环境部署">环境部署</option>

                            <option value="代码分享">代码分享</option>

                            <option value="ChatGPT">ChatGPT</option>

                            <option value="Bootstrap">Bootstrap</option>

                            <option value="Vue">Vue</option>

                            <option value="Python">Python</option>

                            <option value="AdminUI">AdminUI</option>

                            <option value="站务公告">站务公告</option>
                          </select>
                        </div>
                      </div>
                      <div class="form-group">
                        <div class="controls">
                          <textarea
                            id="data"
                            type="text"
                            class="form-control simplemde-text-post"
                            name="text"
                            style="display: none"
                            value=""
                          ></textarea>
                          <label
                            for="data"
                            data-content="Discussion text"
                            style="display: none"
                            >帖子</label
                          >
                        </div>
                      </div>
                      <div
                        class="controls"
                        id="yanzhen"
                        style="margin-bottom: 10px"
                      >
                        <input
                          autocapitalize="off"
                          autocomplete="off"
                          autocorrect="off"
                          spellcheck="false"
                          id="id_captcha_1"
                          name="captcha_1"
                          type="text"
                        />
                        <input
                          id="id_captcha_0"
                          name="captcha_0"
                          type="hidden"
                          value="d35de7825c1b0ff93b2997cd47973fe8bce49cf9"
                        />

                        <img
                          src="static/picture/picture2.png"
                          alt="captcha"
                          class="captcha"
                        />
                      </div>
                      <div class="form-group">
                        <div id="error_forum_show"></div>
                      </div>
                      <div class="form-group">
                        <div class="col-md-6 col-md-offset-3">
                          <input
                            type="submit"
                            class="btn btn-primary"
                            value="提交"
                            id="forum_submit"
                          />
                        </div>
                      </div>
                    </form>
                  </div>
                </div>
                <div class="go-back-button">
                  <a href="forum.html">⟵ 返回</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </main>
      <style type="text/css">
        @media only screen and (min-width: 1170px) {
          #main_content {
            padding-top: 80px;
          }
        }

        #main_content {
          background: #fff;
          padding-top: 80px;
        }
      </style>

      <script type="text/javascript" src="static/js/dc1.js"></script>
      <script type="text/javascript">
        $("#forum_submit")
          .unbind()
          .on("click", function () {
            var html =
              '<div id="error_title" class="alert alert-warning"><a href="#" class="close" data-dismiss="alert">&times;</a><strong>类型不能为空</strong></div>';
            var html2 =
              '<div id="error_title" class="alert alert-warning"><a href="#" class="close" data-dismiss="alert">&times;</a><strong>标题不能够为空</strong></div>';
            var html3 =
              '<div id="error_title" class="alert alert-warning"><a href="#" class="close" data-dismiss="alert">&times;</a><strong>内容不能为空</strong></div>';

            if (!$("#forum_form").find('input[name="title"]').val()) {
              $("#error_forum_show").html(html2);
              return false;
            }
            if (!$("#forum_form").find('select[name="category"]').val()) {
              $("#error_forum_show").html(html);
              return false;
            }
            if (!$("#forum_form").find('textarea[name="text"]').val()) {
              $("#error_forum_show").html(html3);
              return false;
            }
          });

        $(".captcha").click(function () {
          $.getJSON("/captcha/refresh/", function (result) {
            $(".captcha").attr("src", result["image_url"]);
            $("#id_captcha_0").val(result["key"]);
          });
        });
        // $("#forum_form").unbind()
      </script>
      <style type="text/css">
        .form-control_box {
          display: flex;
          /*justify-content:space-between;*/

          width: 100%;
          height: 42px;
          /*padding: 10px 16px;*/
          font-size: 14px;
          /*line-height: 1.42857143;*/
          color: #777;
          /*background-color: #fff;*/
          /*background-image: none;*/
          /*border: 2px solid #ededed;*/
        }

        .captcha {
          /*flex:1;*/
          /*padding:5px 0 ;*/
          width: 80px;
          float: left;
        }

        #id_captcha_1 {
          flex: 1;
          padding: 10px 16px;
          background-color: #fff;
          background-image: none;
          border: 2px solid #ededed;
          padding-right: 0;
        }

        #id_captcha_1:hover {
          box-shadow: none;
          outline: none;
          border-color: #1da7da;
        }
      </style>

      <footer>
        <h3>加入Django中文交流社区，分享交流，携手同行</h3>

        <ul class="list-inline">
          <li><a href="index1.html" class="neon">首 页</a></li>
          <li><a href="article.html" class="neon">文 章</a></li>
          <li><a href="course.html" class="neon">教 程</a></li>
          <li><a href="video.html" class="neon">视 频</a></li>
          <li><a href="forum.html" class="neon">社 区</a></li>
          <li><a href="about.html" class="neon">关于我们</a></li>
          <li><a href="contact.html" class="neon">联系我们</a></li>
        </ul>

        <p class="copyright">
          Copyright © 2018 <a href="index1.html" target="_blank">django.cn</a>
          <span class="second-line">All Rights Reserved.</span><br />
          Powered by <a href="index1.html">Django3</a><br />
          <a href="https://beian.miit.gov.cn" target="_blank"
            >备案号：湘ICP备17023990号-1</a
          >
        </p>
      </footer>
    </div>

    <!-- JavaScripts -->

    <script type="text/javascript">
      $("#confirm-delete").on("show.bs.modal", function (event) {
        var button = $(event.relatedTarget); // Button that triggered the modal
        // var recipient = button.data('whatever') // Extract info from data-* attributes
        // If necessary, you could initiate an AJAX request here (and then do the updating in a callback).
        // Update the modal's content. We'll use jQuery here, but you could use a data binding library or other methods instead.
        var aid = button.data("aid");
        var id = button.data("id");
        var tag = button.data("tag");
        var modal = $(this);
        // modal.find('.modal-title').text('New message to ' + recipient)
        modal.find('input[name="aid"]').val(aid);
        modal.find('input[name="id"]').val(id);
        modal.find('input[name="tag"]').val(tag);

        // console.log('ok')
      });

      // btn_delete_comment
      $("#btn_delete_comment").click(function (event) {
        // var form = new FormData(document.getElementById("delete_comment"))
        // var pwd1 = $('#change-pwd [name="password1"]').val()
        console.log("in comment delete");
        var aid = $('#delete_comment [name="aid"]').val();
        var id = $('#delete_comment [name="id"]').val();
        var tag = $('#delete_comment [name="tag"]').val();
        var token = $('#delete_comment [name="csrfmiddlewaretoken"]').val();
        if (!tag) {
          return;
        }

        var form = new FormData();
        form.append("id", "id");
        form.append("csrfmiddlewaretoken", token);
        form.append("method", "delete");

        $.ajax({
          type: "POST",
          url: "/comment/" + id + "/",
          // data:'json',
          processData: false,
          contentType: false,
          data: form,
          success: function (response) {
            if (tag == "forum") {
              window.location.href = "/forum/forum-" + aid + ".html";
            }
            if (tag == "article") {
              window.location.href = "/article/show-" + aid + ".html";
            }
            if (tag == "course") {
              window.location.href = "/course/show-" + aid + ".html";
            }
          },
        });
      });
    </script>
    <script src="static/js/bundle.js"></script>
    <script>
      (function () {
        var bp = document.createElement("script");
        var curProtocol = window.location.protocol.split(":")[0];
        if (curProtocol === "https") {
          bp.src = "https://zz.bdstatic.com/linksubmit/push.js";
        } else {
          bp.src = "http://push.zhanzhang.baidu.com/push.js";
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
      })();
    </script>
  </body>
</html>
