
<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="baidu-site-verification" content="TcPgCnDcOJ">
    <link rel="apple-touch-icon" href="https://www.django.cn/static/images/icon-touch.png">
    <link rel="icon" sizes="192x192" href="https://www.django.cn/static/images/icon-touch.png">
    <link rel="shortcut icon" href="https://www.django.cn/static/images/favicon.ico">
    
    <title>Django-Q，轻量级消息队列Django-Q初体验-Django社区,Django中文网,django教程,Django！</title>
    <meta name="keywords" content="Django-Q,轻量级消息队列Django-Q">
    <meta name="description" content="Celery实在是太重了，后来我做公众号采集平台的时候，又接触了Django-RQ和Django-Q这俩，前者是对RQ的封装，让RQ和Django更好的结合在一起；后者是一个全新的「多进程任务队列」组件，相比起celery很轻量，当时使用的时候就给我留下不错的印象。">

    <meta name="theme-color" content="#ffffff">
    <link href="static/css/fonts.css" rel="stylesheet">
    <link href="static/css/bootstrap.min.css" rel="stylesheet">
    <link href="static/css/toastr.min.css" rel="stylesheet">
    <link href="static/css/app.css" rel="stylesheet">
    <link href="static/css/font-awesome.min.css" rel="stylesheet">
     
    <script src="static/js/jquery.min.js"></script>
    <script src="static/js/bootstrap.min.js"></script>
    <script src="static/js/highlight.min.js"></script>
    <script src="static/js/toastr.min.js"></script>

   <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?9b0ccd50ff8935f331889174a8280dc2";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

</head>
<body>
<div class="modal fade" id="confirm-delete" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <div style='text-align: center;font-size: 20px'>确定删除?</div>
            </div>
            <div class="modal-footer">
                <form action="/comment/" method="POST" id='delete_comment' style='float: left'>
                    <input type="hidden" name="csrfmiddlewaretoken" value="8d8U9t7yBGyZQ2YEngNUtR5azotGFlMKAyuAZeK3ai4HM1ibPrk7SDkvs2wEevRr">
                    <input type="hidden" name="tag">
                    <input type="hidden" name="aid">
                    <input type="hidden" name="id">
                    <input type="hidden" name="method" value='delete'>
                    <input type='button' class="btn btn-danger btn-ok" id='btn_delete_comment' value='删除'>
                </form>
                <!-- <a class="btn btn-danger btn-ok"><span>删除</span></a> -->
                <button type="button" class="btn btn-default" data-dismiss="modal"><span>取消</span></button>
            </div>
        </div>
    </div>
</div>


    <div class="page__wrapper page--landing">
   
    <header class="header--main animate-search">

    
    <div class="container-fluid">
        <nav class="nav--main">
            <div class="nav__logo">
                <a href="index.html">
                    <span>Django中文网</span>
                </a>
            </div>

            
                <ul class="nav__items nav__items--right">
                    <li class="nav__item">
                        <a href="search.html" class="search-trigger icon-magnifier"></a>
                    </li>
                    <li id="login" class="nav__item">
                        <a href="login.html">
                            登录
                        </a>
                    </li>
                    <li id="register" class="nav__item">
                        <a href="register.html">
                            <span class="btn btn-success">注册</span>
                        </a>
                    </li>
                </ul>

            

            <ul class="nav__items nav__items--left">
                <li class="nav__item nav__item--main">
                    <a href="article.html" class="articles ">
                        文章
                    </a>
                </li>
                 <li class="nav__item nav__item--main">
                    <a href="course.html" class="posts ">
                        教程
                    </a>
                </li>
                <li class="nav__item nav__item--main">
                    <a href="video.html" class="posts ">
                        视频
                    </a>
                </li>
                <li class="nav__item nav__item--main">
                     <a href="forum.html" class="posts ">
                        社区
                    </a>
                </li>
            </ul>


        </nav> <!-- .nav--main -->
    </div>


    <a href="#0" class="nav-trigger icon-menu"></a>

    <div id="search" class="main-search">
    <div class="container-fluid">
        <form id="search-form-top" class="form__search" action="/search/" method="GET">
        <input type="search" name="search" placeholder="Search..." value="" autocomplete="off" required="">

</form>

        <div class="search-suggestions">

        </div>
        <a href="#0" class="close text-replace">Close Form</a>
    </div>
</div> <!-- .main-search -->
</header>

<div class="cover-layer"></div> <!-- cover main content when search form is open -->


    
    <div class="cover-layer"></div>
    <!-- cover main content when search form is open -->
    <main class="main-content" style=" margin-top:40px;">
        <div class="content-wrapper">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-9 article-content">
                        <article class="article--big">
                            <!--<a href="https://jq.qq.com/?_wv=1027&k=0kNpqlZH" target="_blank"><img src="/static/img/web2.jpg"> </a>-->
                            
                                <div class="article__image" style="background-image: url(static/image/djangoQ_Z4PNibz.jpg)"></div>
                            
                            <div class="article__content">
                                <h1 class="article__title">
                                    Django-Q，轻量级消息队列Django-Q初体验

                                </h1>
                                <div class="article__header">
                                    <div class="article__date">
                                        <time>2022年09月12日</time>
                                    </div>
                                    <div class="article__date">点击次数：10871 </div>
                                </div>
                                <div class="article__body">
                                    
                                    <section data-tool="mdnice编辑器" data-website="https://www.mdnice.com" style="margin: 0px 0px 24px; padding: 0px 10px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; line-height: 1.6; word-spacing: 0px; word-break: break-word; text-align: left; font-size: 15px; letter-spacing: 0.05em; color: rgb(89, 89, 89); font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &quot;PingFang SC&quot;, Cambria, Cochin, Georgia, Times, &quot;Times New Roman&quot;, serif; visibility: visible;"><h2 data-tool="mdnice编辑器" style="margin: 1em auto; padding: 0.5em 0px; outline: 0px; font-weight: bold; font-size: 22px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; min-height: 32px; line-height: 28px; color: rgb(119, 48, 152); border-bottom: 1px solid rgb(119, 48, 152); border-top-color: rgb(119, 48, 152); border-right-color: rgb(119, 48, 152); border-left-color: rgb(119, 48, 152); text-align: center; width: 558.438px; display: flex; flex-direction: column; justify-content: center; visibility: visible;">前言</h2><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black; visibility: visible;">最近做的这个项目（基于Django），需要做个功能，实现定时采集车辆定位。</p><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black; visibility: visible;">这让我想起来几年前那个OneCat项目，当时我用的是Celery这个很重的组件</p><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black; visibility: visible;">Celery实在是太重了，后来我做公众号采集平台的时候，又接触了Django-RQ和Django-Q这俩，前者是对RQ的封装，让RQ和Django更好的结合在一起；后者是一个全新的「多进程任务队列」组件，相比起celery很轻量，当时使用的时候就给我留下不错的印象。</p><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black; visibility: visible;">于是这个项目我决定继续使用Django-Q来实现一些异步操作和定时任务。</p><h2 data-tool="mdnice编辑器" style="margin: 1em auto; padding: 0.5em 0px; outline: 0px; font-weight: bold; font-size: 22px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; min-height: 32px; line-height: 28px; color: rgb(119, 48, 152); border-bottom: 1px solid rgb(119, 48, 152); border-top-color: rgb(119, 48, 152); border-right-color: rgb(119, 48, 152); border-left-color: rgb(119, 48, 152); text-align: center; width: 558.438px; display: flex; flex-direction: column; justify-content: center; visibility: visible;">关于Django-Q</h2><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black; visibility: visible;">官方介绍：</p><blockquote data-tool="mdnice编辑器" style="margin: 10px 5px; padding: 10px 10px 10px 20px; outline: 0px; border-left: 3px solid rgb(150, 84, 181); color: rgb(97, 97, 97); font-size: 0.9em; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; border-top: none; border-bottom: none; display: block; overflow: auto; border-right: 1px solid rgb(150, 84, 181); quotes: none; background: rgb(251, 249, 253); visibility: visible;"><p style="margin: 0px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; color: black; line-height: 26px; visibility: visible;">A multiprocessing task queue for Django</p></blockquote><h2 data-tool="mdnice编辑器" style="margin: 1em auto; padding: 0.5em 0px; outline: 0px; font-weight: bold; font-size: 22px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; min-height: 32px; line-height: 28px; color: rgb(119, 48, 152); border-bottom: 1px solid rgb(119, 48, 152); border-top-color: rgb(119, 48, 152); border-right-color: rgb(119, 48, 152); border-left-color: rgb(119, 48, 152); text-align: center; width: 558.438px; display: flex; flex-direction: column; justify-content: center; visibility: visible;">快速开始</h2><h3 data-tool="mdnice编辑器" style="margin: 1.2em 0px 1em; padding: 0px; outline: 0px; font-weight: bold; font-size: 20px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(119, 48, 152); visibility: visible;">安装</h3><pre data-tool="mdnice编辑器" style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px; visibility: visible;"><span style="margin: 0px 0px -7px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; display: block; background: url(&quot;static/image/640.jpg&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52); height: 30px; width: 657px; border-radius: 5px; visibility: visible;"></span><code style="margin: 0px; padding: 15px 16px 16px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; overflow-x: auto; color: rgb(171, 178, 191); display: -webkit-box; font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; font-size: 12px; background: rgb(40, 44, 52); border-radius: 5px; visibility: visible;">pip&nbsp;install&nbsp;django-q<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; visibility: visible;"></code></pre><h3 data-tool="mdnice编辑器" style="margin: 1.2em 0px 1em; padding: 0px; outline: 0px; font-weight: bold; font-size: 20px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(119, 48, 152); visibility: visible;">添加到&nbsp;<code style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; visibility: visible;">INSTALLED_APPS</code></h3><pre data-tool="mdnice编辑器" style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px; visibility: visible;"><span style="margin: 0px 0px -7px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; display: block; background: url(&quot;static/image/640.jpg&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52); height: 30px; width: 657px; border-radius: 5px; visibility: visible;"></span><code style="margin: 0px; padding: 15px 16px 16px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; overflow-x: auto; color: rgb(171, 178, 191); display: -webkit-box; font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; font-size: 12px; background: rgb(40, 44, 52); border-radius: 5px;">INSTALLED_APPS&nbsp;=&nbsp;(<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(92, 99, 112); font-style: italic; line-height: 26px;">#&nbsp;other&nbsp;apps</span><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">&#39;django_q&#39;</span>,<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">)<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;"></code></pre><h3 data-tool="mdnice编辑器" style="margin: 1.2em 0px 1em; padding: 0px; outline: 0px; font-weight: bold; font-size: 20px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(119, 48, 152);">数据库迁移</h3><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">由于Django-Q会把执行结果放到数据库里，所以要执行一下数据库迁移的操作</p><pre data-tool="mdnice编辑器" style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="margin: 0px 0px -7px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; display: block; background: url(&quot;static/image/640.jpg&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52); height: 30px; width: 657px; border-radius: 5px;"></span><code style="margin: 0px; padding: 15px 16px 16px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; overflow-x: auto; color: rgb(171, 178, 191); display: -webkit-box; font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; font-size: 12px; background: rgb(40, 44, 52); border-radius: 5px;">python&nbsp;manage.py&nbsp;migrate<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;"></code></pre><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">这个操作会生成&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">django_q_ormq</code>、<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">django_q_schedule</code>、<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">django_q_task</code>&nbsp;三个表</p><h3 data-tool="mdnice编辑器" style="margin: 1.2em 0px 1em; padding: 0px; outline: 0px; font-weight: bold; font-size: 20px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(119, 48, 152);">配置</h3><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">因为本身项目用的缓存就是Redis，所以我直接用Redis作为消息队列的后端（broker）</p><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">Django-Q支持很多种后端，除了Redis还有Disque、IronMQ、Amazon SQS、MongoDB或者是Django的ORM~</p><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">在&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">settings.py</code>&nbsp;中添加以下配置：</p><pre data-tool="mdnice编辑器" style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="margin: 0px 0px -7px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; display: block; background: url(&quot;static/image/640.jpg&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52); height: 30px; width: 657px; border-radius: 5px;"></span><code style="margin: 0px; padding: 15px 16px 16px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; overflow-x: auto; color: rgb(171, 178, 191); display: -webkit-box; font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; font-size: 12px; background: rgb(40, 44, 52); border-radius: 5px;">Q_CLUSTER&nbsp;=&nbsp;{<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">&#39;name&#39;</span>:&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">&#39;project_name&#39;</span>,<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">&#39;workers&#39;</span>:&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(209, 154, 102); line-height: 26px;">4</span>,<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">&#39;recycle&#39;</span>:&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(209, 154, 102); line-height: 26px;">500</span>,<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">&#39;timeout&#39;</span>:&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(209, 154, 102); line-height: 26px;">60</span>,<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">&#39;compress&#39;</span>:&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(86, 182, 194); line-height: 26px;">True</span>,<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">&#39;cpu_affinity&#39;</span>:&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(209, 154, 102); line-height: 26px;">1</span>,<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">&#39;save_limit&#39;</span>:&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(209, 154, 102); line-height: 26px;">250</span>,<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">&#39;queue_limit&#39;</span>:&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(209, 154, 102); line-height: 26px;">500</span>,<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">&#39;label&#39;</span>:&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">&#39;Django&nbsp;Q&#39;</span>,<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">&#39;redis&#39;</span>:&nbsp;{<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">&#39;host&#39;</span>:&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(209, 154, 102); line-height: 26px;">127.0</span><span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(209, 154, 102); line-height: 26px;">.0</span><span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(209, 154, 102); line-height: 26px;">.1</span><span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">&#39;,<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;</span>port<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">&#39;:&nbsp;6379,<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;</span>d<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">b&#39;:&nbsp;0,<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;}<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">}<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;"></span></code></pre><h3 data-tool="mdnice编辑器" style="margin: 1.2em 0px 1em; padding: 0px; outline: 0px; font-weight: bold; font-size: 20px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(119, 48, 152);">启动服务</h3><pre data-tool="mdnice编辑器" style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="margin: 0px 0px -7px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; display: block; background: url(&quot;static/image/640.jpg&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52); height: 30px; width: 657px; border-radius: 5px;"></span><code style="margin: 0px; padding: 15px 16px 16px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; overflow-x: auto; color: rgb(171, 178, 191); display: -webkit-box; font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; font-size: 12px; background: rgb(40, 44, 52); border-radius: 5px;">python&nbsp;manage.py&nbsp;qcluster<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;"></code></pre><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">搞定，现在消息队列服务已经跑起来了</p><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">我们可以添加异步任务或者定时任务</p><h2 data-tool="mdnice编辑器" style="margin: 1em auto; padding: 0.5em 0px; outline: 0px; font-weight: bold; font-size: 22px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; min-height: 32px; line-height: 28px; color: rgb(119, 48, 152); border-bottom: 1px solid rgb(119, 48, 152); border-top-color: rgb(119, 48, 152); border-right-color: rgb(119, 48, 152); border-left-color: rgb(119, 48, 152); text-align: center; width: 558.438px; display: flex; flex-direction: column; justify-content: center;">异步任务</h2><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">最简单的方式是使用它提供的&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">async_task</code>&nbsp;方法，添加一个新的异步任务到队列中</p><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">来写个例子，输入一个数，求阶乘之后开平方</p><pre data-tool="mdnice编辑器" style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="margin: 0px 0px -7px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; display: block; background: url(&quot;static/image/640.jpg&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52); height: 30px; width: 657px; border-radius: 5px;"></span><code style="margin: 0px; padding: 15px 16px 16px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; overflow-x: auto; color: rgb(171, 178, 191); display: -webkit-box; font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; font-size: 12px; background: rgb(40, 44, 52); border-radius: 5px;"><span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(198, 120, 221); line-height: 26px;">import</span>&nbsp;math<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;"><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px;"><span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(198, 120, 221); line-height: 26px;">def</span>&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(97, 174, 238); line-height: 26px;">demo_task</span><span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px;">(number:&nbsp;int)</span>:</span><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(198, 120, 221); line-height: 26px;">return</span>&nbsp;math.sqrt(math.factorial(number))<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;"></code></pre><h3 data-tool="mdnice编辑器" style="margin: 1.2em 0px 1em; padding: 0px; outline: 0px; font-weight: bold; font-size: 20px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(119, 48, 152);">启动任务</h3><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">然后来添加一个异步任务</p><pre data-tool="mdnice编辑器" style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="margin: 0px 0px -7px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; display: block; background: url(&quot;static/image/640.jpg&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52); height: 30px; width: 657px; border-radius: 5px;"></span><code style="margin: 0px; padding: 15px 16px 16px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; overflow-x: auto; color: rgb(171, 178, 191); display: -webkit-box; font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; font-size: 12px; background: rgb(40, 44, 52); border-radius: 5px;"><span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(198, 120, 221); line-height: 26px;">from</span>&nbsp;django_q.tasks&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(198, 120, 221); line-height: 26px;">import</span>&nbsp;async_task,&nbsp;Task<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;"><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px;"><span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(198, 120, 221); line-height: 26px;">def</span>&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(97, 174, 238); line-height: 26px;">task_finish</span><span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px;">(task:&nbsp;Task)</span>:</span><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;print(<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">f&#39;任务&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(224, 108, 117); line-height: 26px;">{task.name}</span>（ID：<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(224, 108, 117); line-height: 26px;">{task.id}</span>）完成！&#39;</span>)<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;"><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">task_id&nbsp;=&nbsp;async_task(<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;demo_task,&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(209, 154, 102); line-height: 26px;">10</span>,<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;task_name=<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">&#39;任务名称&#39;</span>,<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;hook=task_finish,<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">)<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;"></code></pre><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">可以看到，直接调用&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">async_task</code>&nbsp;方法就行</p><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">这个方法的定义是</p><pre data-tool="mdnice编辑器" style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="margin: 0px 0px -7px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; display: block; background: url(&quot;static/image/640.jpg&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52); height: 30px; width: 657px; border-radius: 5px;"></span><code style="margin: 0px; padding: 15px 16px 16px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; overflow-x: auto; color: rgb(171, 178, 191); display: -webkit-box; font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; font-size: 12px; background: rgb(40, 44, 52); border-radius: 5px;">async_task(func:&nbsp;Any,&nbsp;*args:&nbsp;Any,&nbsp;**kwargs:&nbsp;Any)<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;"></code></pre><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">传入要异步执行的方法之后，可以把该方法的参数跟在后面传进去，也可以用&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">kwargs</code>&nbsp;的方式传入</p><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">这两种方式都可以的：</p><ul data-tool="mdnice编辑器" class=" list-paddingleft-2" style="list-style-type: disc;"><li><section style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px; text-align: left; color: rgb(1, 1, 1); font-weight: 500;"><code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">async_task(demo_task, 10)</code></section></li><li><section style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px; text-align: left; color: rgb(1, 1, 1); font-weight: 500;"><code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">async_task(demo_task, number=10)</code></section></li></ul><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">我个人比较喜欢第一种，因为Django-Q本身有几个命名参数，比如&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">task_name</code>、<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">hook</code>、<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">timeout</code>之类的，用第一种方式传参不容易和Django-Q默认的命名参数冲突。</p><h3 data-tool="mdnice编辑器" style="margin: 1.2em 0px 1em; padding: 0px; outline: 0px; font-weight: bold; font-size: 20px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(119, 48, 152);">获取执行结果</h3><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">有两种方式获取任务的执行结果：</p><ul data-tool="mdnice编辑器" class=" list-paddingleft-2" style="list-style-type: disc;"><li><section style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px; text-align: left; color: rgb(1, 1, 1); font-weight: 500;">admin后台</section></li><li><section style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px; text-align: left; color: rgb(1, 1, 1); font-weight: 500;">使用&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">result</code>&nbsp;方法，在代码中获取</section></li></ul><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">第一种方式无需赘述，在安装Django-Q组件后执行了数据库迁移，就会生成&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">Failed tasks</code>、<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">Scheduled tasks</code>、<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">Successful tasks</code>&nbsp;三个admin模块，顾名思义，在&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">Failed tasks</code>&nbsp;和<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">Successful tasks</code>&nbsp;中可以看到任务的执行结果，也就是我们写在&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">demo_task</code>&nbsp;里的返回值。</p><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">第二种方式，代码如下：</p><pre data-tool="mdnice编辑器" style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="margin: 0px 0px -7px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; display: block; background: url(&quot;static/image/640.jpg&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52); height: 30px; width: 657px; border-radius: 5px;"></span><code style="margin: 0px; padding: 15px 16px 16px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; overflow-x: auto; color: rgb(171, 178, 191); display: -webkit-box; font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; font-size: 12px; background: rgb(40, 44, 52); border-radius: 5px;"><span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(198, 120, 221); line-height: 26px;">from</span>&nbsp;django_q.tasks&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(198, 120, 221); line-height: 26px;">import</span>&nbsp;result<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;"><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">task_result&nbsp;=&nbsp;result(task_id)<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;"></code></pre><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">把&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">task_id</code>&nbsp;传入就可以查询任务执行的结果，如果任务还没执行完，那结果就是&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">None</code></p><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">这个&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">result</code>&nbsp;方法还有个&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">wait</code>&nbsp;参数，可以设置等待时间，单位是毫秒</p><h3 data-tool="mdnice编辑器" style="margin: 1.2em 0px 1em; padding: 0px; outline: 0px; font-weight: bold; font-size: 20px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(119, 48, 152);">执行完成回调</h3><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">上面代码中，我们还设置了&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">hook</code>&nbsp;参数</p><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">作用就是任务执行完成之后，执行&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">task_finish</code>&nbsp;这个函数</p><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">在&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">task_finish</code>&nbsp;里可以通过&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">task</code>&nbsp;参数获取任务信息</p><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">就是这样~</p><h3 data-tool="mdnice编辑器" style="margin: 1.2em 0px 1em; padding: 0px; outline: 0px; font-weight: bold; font-size: 20px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(119, 48, 152);"><code style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">async_task</code>&nbsp;的其他参数</h3><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">创建异步任务的这个方法还有很多参数，官网文档写得还算可以，很多参数都是&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">Q_CLUSTER</code>&nbsp;配置里面有的，在&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">async_task</code>&nbsp;里设置这些参数就会覆盖默认的配置。</p><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">我直接搬运一波，权当翻译文档了~</p><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">除了上面介绍到的&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">task_name</code>、<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">hook</code>&nbsp;还有这些参数：</p><ul data-tool="mdnice编辑器" class=" list-paddingleft-2" style="list-style-type: disc;"><li><section style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px; text-align: left; color: rgb(1, 1, 1); font-weight: 500;"><code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">group: str</code>&nbsp;任务的分组名称</section></li><li><section style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px; text-align: left; color: rgb(1, 1, 1); font-weight: 500;"><code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">save</code>&nbsp;配置任务运行结果的存储后端，不过文档里只是一句话的介绍，具体如何配置还得研究一下。（稍微看了一下源码，没搞懂，动态语言太折磨人了）</section></li><li><section style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px; text-align: left; color: rgb(1, 1, 1); font-weight: 500;"><code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">timeout: int</code>&nbsp;任务超时时间，单位是秒。回顾一下前面的&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">Q_CLUSTER</code>&nbsp;配置，里面有&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">timeout</code>&nbsp;配置，设置这个参数可以覆盖前面的配置，如果任务运行超出了这个时间，就会被直接终止。</section></li><li><section style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px; text-align: left; color: rgb(1, 1, 1); font-weight: 500;"><code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">ack_failures: bool</code>&nbsp;设置为True时，也承认失败的任务。这会导致失败的任务被视为成功交付，从而将其从任务队列中删除。默认值为False。（说实话我没看懂是啥意思）</section></li><li><section style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px; text-align: left; color: rgb(1, 1, 1); font-weight: 500;"><code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">sync: bool</code>&nbsp;设置为True的时候，所有异步任务会变成同步执行，这个功能在测试的时候比较有用。默认是False。</section></li><li><section style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px; text-align: left; color: rgb(1, 1, 1); font-weight: 500;"><code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">cached</code>&nbsp;这个参数既可以设置为True，也可以传入数字，代表缓存过期时间。根据文档描述，异步任务的执行结果会存在数据库里，当这个参数设置为True的时候，结果不写入数据库，而是保存在缓存里。这个功能在短时间内要大量执行异步任务，且不需要把结果立刻写入数据库的情况下比较有用，可以提高性能。</section></li><li><section style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px; text-align: left; color: rgb(1, 1, 1); font-weight: 500;"><code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">broker</code>&nbsp;需要传入一个&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">Broker</code>&nbsp;对象的实例，用来控制这个异步任务在哪个Broker里执行。</section></li><li><section style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px; text-align: left; color: rgb(1, 1, 1); font-weight: 500;"><code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">q_options: dict</code>&nbsp;这是最后一个参数了。我下面单独介绍一下</section></li></ul><h4 data-tool="mdnice编辑器" style="margin: 30px 0px 15px; padding: 0px; outline: 0px; font-weight: bold; font-size: 18px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: black;"><code style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">q_options</code>&nbsp;参数</h4><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">根据前面启动任务的部分，我们启动异步任务的时候，可以通过命名参数向任务方法传递参数，比如：</p><pre data-tool="mdnice编辑器" style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="margin: 0px 0px -7px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; display: block; background: url(&quot;static/image/640.jpg&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52); height: 30px; width: 657px; border-radius: 5px;"></span><code style="margin: 0px; padding: 15px 16px 16px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; overflow-x: auto; color: rgb(171, 178, 191); display: -webkit-box; font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; font-size: 12px; background: rgb(40, 44, 52); border-radius: 5px;">async_task(demo_task,&nbsp;number=<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(209, 154, 102); line-height: 26px;">10</span>)<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;"></code></pre><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">但&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">async_task</code>&nbsp;这个方法本身又有很多参数，如果这个参数名称和我们要执行的任务&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">demo_task</code>&nbsp;参数重名的话，这些参数就被&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">async_task</code>&nbsp;拿走了，我们的任务&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">demo_task</code>&nbsp;就拿不到这些参数了。</p><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">怎么办？</p><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;"><code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">q_options</code>&nbsp;参数就是为了解决这个问题</p><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">可以把要传给&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">async_task</code>&nbsp;的参数都包装在一个 dict 里面，然后通过&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">q_options</code>&nbsp;参数传入</p><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">假如我们的&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">demo_task</code>&nbsp;是这样的：</p><pre data-tool="mdnice编辑器" style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="margin: 0px 0px -7px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; display: block; background: url(&quot;static/image/640.jpg&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52); height: 30px; width: 657px; border-radius: 5px;"></span><code style="margin: 0px; padding: 15px 16px 16px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; overflow-x: auto; color: rgb(171, 178, 191); display: -webkit-box; font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; font-size: 12px; background: rgb(40, 44, 52); border-radius: 5px;"><span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px;"><span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(198, 120, 221); line-height: 26px;">def</span>&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(97, 174, 238); line-height: 26px;">demo_task</span><span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px;">(number:&nbsp;int,&nbsp;timeout:&nbsp;int)</span>:</span><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;...<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;"></code></pre><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">除了&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">number</code>&nbsp;这个参数，还要接收一个跟&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">async_task</code>&nbsp;自有参数重名的&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">timeout</code>&nbsp;参数，使用&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">q_options</code>&nbsp;的解决方案如下</p><pre data-tool="mdnice编辑器" style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="margin: 0px 0px -7px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; display: block; background: url(&quot;static/image/640.jpg&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52); height: 30px; width: 657px; border-radius: 5px;"></span><code style="margin: 0px; padding: 15px 16px 16px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; overflow-x: auto; color: rgb(171, 178, 191); display: -webkit-box; font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; font-size: 12px; background: rgb(40, 44, 52); border-radius: 5px;">opts&nbsp;=&nbsp;{<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">&#39;hook&#39;</span>:&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">&#39;hooks.print_result&#39;</span>,<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">&#39;group&#39;</span>:&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">&#39;math&#39;</span>,<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">&#39;timeout&#39;</span>:&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(209, 154, 102); line-height: 26px;">30</span><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">}<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;"><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">async_task(demo_task,&nbsp;number=<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(209, 154, 102); line-height: 26px;">10</span>,&nbsp;timeout=<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(209, 154, 102); line-height: 26px;">100</span>,&nbsp;q_options=opts)<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;"></code></pre><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">这样既能……又能……，完美啊~</p><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">当然我还是建议用&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">*args</code>&nbsp;的方式传参，这样就没有参数重名的问题了。</p><h2 data-tool="mdnice编辑器" style="margin: 1em auto; padding: 0.5em 0px; outline: 0px; font-weight: bold; font-size: 22px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; min-height: 32px; line-height: 28px; color: rgb(119, 48, 152); border-bottom: 1px solid rgb(119, 48, 152); border-top-color: rgb(119, 48, 152); border-right-color: rgb(119, 48, 152); border-left-color: rgb(119, 48, 152); text-align: center; width: 558.438px; display: flex; flex-direction: column; justify-content: center;">定时任务</h2><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">有两种方式添加定时任务</p><ul data-tool="mdnice编辑器" class=" list-paddingleft-2" style="list-style-type: disc;"><li><section style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px; text-align: left; color: rgb(1, 1, 1); font-weight: 500;">在代码添加</section></li><li><section style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px; text-align: left; color: rgb(1, 1, 1); font-weight: 500;">admin后台</section></li></ul><h3 data-tool="mdnice编辑器" style="margin: 1.2em 0px 1em; padding: 0px; outline: 0px; font-weight: bold; font-size: 20px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(119, 48, 152);">在代码中添加</h3><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">比较简单，直接上代码</p><pre data-tool="mdnice编辑器" style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="margin: 0px 0px -7px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; display: block; background: url(&quot;static/image/640.jpg&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52); height: 30px; width: 657px; border-radius: 5px;"></span><code style="margin: 0px; padding: 15px 16px 16px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; overflow-x: auto; color: rgb(171, 178, 191); display: -webkit-box; font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; font-size: 12px; background: rgb(40, 44, 52); border-radius: 5px;"><span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(198, 120, 221); line-height: 26px;">from</span>&nbsp;django_q.tasks&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(198, 120, 221); line-height: 26px;">import</span>&nbsp;schedule<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;"><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">schedule(<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">&#39;demo_task&#39;</span>,<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;schedule_type=Schedule.MINUTES,<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;minutes=<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(209, 154, 102); line-height: 26px;">1</span>,<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;task_name=<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">&#39;任务名称&#39;</span>,<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">)<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;"></code></pre><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">有一点注意的是，因为添加后的定时任务是要保存在数据库中的</p><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">所以需要把要执行的方法（包含完整包名），以字符串的形式传入</p><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">假如在我们的Django项目中，要执行的是在&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">apps/test/tasks.py</code>&nbsp;文件中的&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">demo_task</code>&nbsp;方法</p><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">那么需要把&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">apps.test.tasks.demo_task</code>&nbsp;这个完整的名称传入</p><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">在admin中添加也是一样</p><h3 data-tool="mdnice编辑器" style="margin: 1.2em 0px 1em; padding: 0px; outline: 0px; font-weight: bold; font-size: 20px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(119, 48, 152);">时间间隔设置</h3><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">Django-Q的定时任务有很多类型：</p><ul data-tool="mdnice编辑器" class=" list-paddingleft-2" style="list-style-type: disc;"><li><section style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px; text-align: left; color: rgb(1, 1, 1); font-weight: 500;">一次性</section></li><li><section style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px; text-align: left; color: rgb(1, 1, 1); font-weight: 500;">按x分钟执行一次</section></li><li><section style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px; text-align: left; color: rgb(1, 1, 1); font-weight: 500;">每小时一次</section></li><li><section style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px; text-align: left; color: rgb(1, 1, 1); font-weight: 500;">每天</section></li><li><section style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px; text-align: left; color: rgb(1, 1, 1); font-weight: 500;">每周</section></li><li><section style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px; text-align: left; color: rgb(1, 1, 1); font-weight: 500;">每月</section></li><li><section style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px; text-align: left; color: rgb(1, 1, 1); font-weight: 500;">每季度</section></li><li><section style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px; text-align: left; color: rgb(1, 1, 1); font-weight: 500;">每年</section></li><li><section style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px; text-align: left; color: rgb(1, 1, 1); font-weight: 500;">Cron表达式</section></li></ul><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">注意，即使是Cron表达式，定时任务执行的最短间隔也是1分钟</p><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">这点我一开始不知道，用Cron表达式写了个15秒的任务，但执行时间根本不对，然后我翻了一下github上的issues，看到作者的解答才知道~</p><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">那个Issues的地址：<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; text-decoration: underline; color: rgb(0, 122, 170);"><strong style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">https://github.com/Koed00/django-q/issues/179</strong></span></p><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">作者的回复：</p><blockquote data-tool="mdnice编辑器" style="margin: 10px 5px; padding: 10px 10px 10px 20px; outline: 0px; border-left: 3px solid rgb(150, 84, 181); color: rgb(97, 97, 97); font-size: 0.9em; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; border-top: none; border-bottom: none; display: block; overflow: auto; border-right: 1px solid rgb(150, 84, 181); quotes: none; background: rgb(251, 249, 253);"><p style="margin: 0px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; color: black; line-height: 26px;">The current design has a heartbeat of 30 seconds, which means the schedule table can&#39;t have schedules below that. Most of this is explained in the architecture docs. Because of the way the internal loop is set up, a resolution under a dozen seconds or so, quickly becomes unreliable.</p><p style="margin: 0px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; color: black; line-height: 26px;">I always imagined tasks that need accuracy measured in seconds, would use a delayed tasks strategy where a few seconds delay is either added through the broker or inside the task itself.</p><p style="margin: 0px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; color: black; line-height: 26px;">The problem with all this, is that a task is currently always added to the back of the queue. So even with a 1 second resolution on the schedule, the task still has to wait it&#39;s execution time. Which can of course vary wildly depending on the broker type, worker capacity and current workload.</p></blockquote><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">这点感觉有些鸡肋，如果要高频执行的任务，那只能选择Celery了</p><h3 data-tool="mdnice编辑器" style="margin: 1.2em 0px 1em; padding: 0px; outline: 0px; font-weight: bold; font-size: 20px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(119, 48, 152);">在admin后台添加</h3><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">这个更简单，傻瓜式操作</p><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">所以这部分略过了~</p><h2 data-tool="mdnice编辑器" style="margin: 1em auto; padding: 0.5em 0px; outline: 0px; font-weight: bold; font-size: 22px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; min-height: 32px; line-height: 28px; color: rgb(119, 48, 152); border-bottom: 1px solid rgb(119, 48, 152); border-top-color: rgb(119, 48, 152); border-right-color: rgb(119, 48, 152); border-left-color: rgb(119, 48, 152); text-align: center; width: 558.438px; display: flex; flex-direction: column; justify-content: center;">docker部署</h2><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">现在后端服务基本是用docker部署的</p><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">为了能在docker中使用Django-Q</p><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">我们需要在原有Django容器的基础上，再起一个同样的容器，然后入口改成qcluster的启动命令</p><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">这里有个issues也有讨论这个问题：<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; text-decoration: underline; color: rgb(0, 122, 170);"><strong style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">https://github.com/Koed00/django-q/issues/513</strong></span></p><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">来个&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">docker-compose.yml</code>&nbsp;的例子</p><pre data-tool="mdnice编辑器" style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="margin: 0px 0px -7px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; display: block; background: url(&quot;static/image/640.jpg&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52); height: 30px; width: 657px; border-radius: 5px;"></span><code style="margin: 0px; padding: 15px 16px 16px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; overflow-x: auto; color: rgb(171, 178, 191); display: -webkit-box; font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; font-size: 12px; background: rgb(40, 44, 52); border-radius: 5px;"><span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(209, 154, 102); line-height: 26px;">version:</span>&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">&quot;3.9&quot;</span><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(209, 154, 102); line-height: 26px;">services:</span>&nbsp;&nbsp;<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(209, 154, 102); line-height: 26px;">redis:</span><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(209, 154, 102); line-height: 26px;">image:</span>&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">redis:alpine</span><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(209, 154, 102); line-height: 26px;">ports:</span><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(97, 174, 238); line-height: 26px;">-</span>&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(209, 154, 102); line-height: 26px;">6379</span><span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">:6379</span><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(209, 154, 102); line-height: 26px;">web:</span><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(209, 154, 102); line-height: 26px;">build:</span>&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">.</span><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(209, 154, 102); line-height: 26px;">command:</span>&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">python</span>&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">manage.py</span>&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">runserver</span>&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(209, 154, 102); line-height: 26px;">0.0</span><span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(209, 154, 102); line-height: 26px;">.0</span><span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(209, 154, 102); line-height: 26px;">.0</span><span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">:8000</span><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(209, 154, 102); line-height: 26px;">volumes:</span><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(97, 174, 238); line-height: 26px;">-</span>&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">.:/code</span><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(209, 154, 102); line-height: 26px;">ports:</span><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(97, 174, 238); line-height: 26px;">-</span>&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">&quot;8000:8000&quot;</span><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(209, 154, 102); line-height: 26px;">depends_on:</span><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(97, 174, 238); line-height: 26px;">-</span>&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">redis</span><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(97, 174, 238); line-height: 26px;">-</span>&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">django_q</span><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(209, 154, 102); line-height: 26px;">django_q:</span><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(209, 154, 102); line-height: 26px;">build:</span>&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">.</span><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(209, 154, 102); line-height: 26px;">command:</span>&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">python</span>&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">manage.py</span>&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">qcluster</span><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(209, 154, 102); line-height: 26px;">volumes:</span><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(97, 174, 238); line-height: 26px;">-</span>&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">.:/code</span><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(209, 154, 102); line-height: 26px;">depends_on:</span><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(97, 174, 238); line-height: 26px;">-</span>&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">redis</span><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;"></code></pre><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">一个简单的例子</p><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">其他的类似环境变量这些，根据实际情况来</p><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">注意：</p><ul data-tool="mdnice编辑器" class=" list-paddingleft-2" style="list-style-type: disc;"><li><section style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px; text-align: left; color: rgb(1, 1, 1); font-weight: 500;">Django容器有的东西（环境变量、依赖），Django-Q也要同步加进去</section></li><li><section style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px; text-align: left; color: rgb(1, 1, 1); font-weight: 500;">Django项目代码修改之后，如果是通过uwsgi之类的自动重启服务，那要注意Django-Q不会自动重启，需要手动执行&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">docker-compose restart django_q</code>&nbsp;，才能使修改的代码生效</section></li></ul><h2 data-tool="mdnice编辑器" style="margin: 1em auto; padding: 0.5em 0px; outline: 0px; font-weight: bold; font-size: 22px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; min-height: 32px; line-height: 28px; color: rgb(119, 48, 152); border-bottom: 1px solid rgb(119, 48, 152); border-top-color: rgb(119, 48, 152); border-right-color: rgb(119, 48, 152); border-left-color: rgb(119, 48, 152); text-align: center; width: 558.438px; display: flex; flex-direction: column; justify-content: center;">其他</h2><h3 data-tool="mdnice编辑器" style="margin: 1.2em 0px 1em; padding: 0px; outline: 0px; font-weight: bold; font-size: 20px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(119, 48, 152);">命令行工具</h3><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">Django-Q还提供了一些命令行工具</p><ul data-tool="mdnice编辑器" class=" list-paddingleft-2" style="list-style-type: disc;"><li><section style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px; text-align: left; color: rgb(1, 1, 1); font-weight: 500;">监控cluster执行情况：<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">python manage.py qmonitor</code></section></li><li><section style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px; text-align: left; color: rgb(1, 1, 1); font-weight: 500;">监控内容：<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">python manage.py qmemory</code></section></li><li><section style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px; text-align: left; color: rgb(1, 1, 1); font-weight: 500;">查看当前状态信息：<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">python manage.py qinfo</code></section></li></ul><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">除了使用命令监控，还可以在代码里做监控，不过我暂时没用到，所以还没研究，有需要的同学可以直接看文档</p><h3 data-tool="mdnice编辑器" style="margin: 1.2em 0px 1em; padding: 0px; outline: 0px; font-weight: bold; font-size: 20px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(119, 48, 152);">admin自定义</h3><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">安装完Django-Q后，会在admin出现三个菜单，跟普通的Django app一样，这些也是通过 admin 注册进去的，因此我们可以重新注册这些&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">ModelAdmin</code>&nbsp;来自定义admin上的操作界面</p><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">来一段官方关于失败任务界面的代码：</p><pre data-tool="mdnice编辑器" style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="margin: 0px 0px -7px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; display: block; background: url(&quot;static/image/640.jpg&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52); height: 30px; width: 657px; border-radius: 5px;"></span><code style="margin: 0px; padding: 15px 16px 16px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; overflow-x: auto; color: rgb(171, 178, 191); display: -webkit-box; font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; font-size: 12px; background: rgb(40, 44, 52); border-radius: 5px;"><span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(198, 120, 221); line-height: 26px;">from</span>&nbsp;django_q&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(198, 120, 221); line-height: 26px;">import</span>&nbsp;models&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(198, 120, 221); line-height: 26px;">as</span>&nbsp;q_models<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(198, 120, 221); line-height: 26px;">from</span>&nbsp;django_q&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(198, 120, 221); line-height: 26px;">import</span>&nbsp;admin&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(198, 120, 221); line-height: 26px;">as</span>&nbsp;q_admin<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;"><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">admin.site.unregister([q_models.Failure])<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(97, 174, 238); line-height: 26px;">@admin.register(q_models.Failure)</span><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px;"><span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(198, 120, 221); line-height: 26px;">class</span>&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(230, 192, 123); line-height: 26px;">ChildClassAdmin</span><span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px;">(q_admin.FailAdmin)</span>:</span><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;list_display&nbsp;=&nbsp;(<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">&#39;name&#39;</span>,<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">&#39;func&#39;</span>,<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">&#39;result&#39;</span>,<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">&#39;started&#39;</span>,<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(92, 99, 112); font-style: italic; line-height: 26px;">#&nbsp;add&nbsp;attempt_count&nbsp;to&nbsp;list_display</span><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">&#39;attempt_count&#39;</span><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;)<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;"></code></pre><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">跟普通的&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">ModelAdmin</code>&nbsp;是一样的</p><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">我们可以自行添加搜索框、过滤字段之类的。记得要先执行&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">admin.site.unregister([q_models.Failure])</code>&nbsp;取消之前Django-Q自己注册的&nbsp;<code style="margin: 0px 2px; padding: 2px 4px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word; font-size: 14px; border-radius: 4px; background-color: rgba(27, 31, 35, 0.05); font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: rgb(150, 84, 181);">ModelAdmin</code>&nbsp;对象。</p><h3 data-tool="mdnice编辑器" style="margin: 1.2em 0px 1em; padding: 0px; outline: 0px; font-weight: bold; font-size: 20px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(119, 48, 152);">信号</h3><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">Django内置信号系统，我之前有写过一篇简单的文章介绍：<a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzI3MjQ5ODU0Mg==&mid=2247485588&idx=1&sn=603f900006d8596f22d0dcd2c59daddf&chksm=eb30e295dc476b83b41bbff44eee039872ed806503d30889d5ce5d04873c1799204f696d6853&scene=21#wechat_redirect" data-itemshowtype="0" data-linktype="2" style="margin: 0px; padding: 0px; outline: 0px; color: rgb(150, 84, 181); text-decoration: underline; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); cursor: pointer; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(150, 84, 181);"><strong style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">3分钟看懂Python后端必须知道的Django的信号机制</strong></span></a></p><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">Django-Q提供了两类信号：</p><ul data-tool="mdnice编辑器" class=" list-paddingleft-2" style="list-style-type: disc;"><li><section style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px; text-align: left; color: rgb(1, 1, 1); font-weight: 500;">任务加入消息队列前</section></li><li><section style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px; text-align: left; color: rgb(1, 1, 1); font-weight: 500;">任务执行前</section></li></ul><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">例子代码如下：</p><pre data-tool="mdnice编辑器" style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="margin: 0px 0px -7px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; display: block; background: url(&quot;static/image/640.jpg&quot;) 10px 10px / 40px no-repeat rgb(40, 44, 52); height: 30px; width: 657px; border-radius: 5px;"></span><code style="margin: 0px; padding: 15px 16px 16px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; overflow-x: auto; color: rgb(171, 178, 191); display: -webkit-box; font-family: &quot;Operator Mono&quot;, Consolas, Monaco, Menlo, monospace; font-size: 12px; background: rgb(40, 44, 52); border-radius: 5px;"><span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(198, 120, 221); line-height: 26px;">from</span>&nbsp;django.dispatch&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(198, 120, 221); line-height: 26px;">import</span>&nbsp;receiver<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(198, 120, 221); line-height: 26px;">from</span>&nbsp;django_q.signals&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(198, 120, 221); line-height: 26px;">import</span>&nbsp;pre_enqueue,&nbsp;pre_execute<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;"><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(97, 174, 238); line-height: 26px;">@receiver(pre_enqueue)</span><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px;"><span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(198, 120, 221); line-height: 26px;">def</span>&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(97, 174, 238); line-height: 26px;">my_pre_enqueue_callback</span><span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px;">(sender,&nbsp;task,&nbsp;**kwargs)</span>:</span><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;print(<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">&quot;Task&nbsp;{}&nbsp;will&nbsp;be&nbsp;enqueued&quot;</span>.format(task[<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">&quot;name&quot;</span>]))<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;"><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(97, 174, 238); line-height: 26px;">@receiver(pre_execute)</span><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;"><span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px;"><span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(198, 120, 221); line-height: 26px;">def</span>&nbsp;<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(97, 174, 238); line-height: 26px;">my_pre_execute_callback</span><span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px;">(sender,&nbsp;func,&nbsp;task,&nbsp;**kwargs)</span>:</span><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;print(<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">&quot;Task&nbsp;{}&nbsp;will&nbsp;be&nbsp;executed&nbsp;by&nbsp;calling&nbsp;{}&quot;</span>.format(<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;task[<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(152, 195, 121); line-height: 26px;">&quot;name&quot;</span>],&nbsp;func))<br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;"></code></pre><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">有需要的话可以注册消息接收器，做一些处理。<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; text-decoration: line-through;">（不过我暂时是没用上）</span></p><h2 data-tool="mdnice编辑器" style="margin: 1em auto; padding: 0.5em 0px; outline: 0px; font-weight: bold; font-size: 22px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; min-height: 32px; line-height: 28px; color: rgb(119, 48, 152); border-bottom: 1px solid rgb(119, 48, 152); border-top-color: rgb(119, 48, 152); border-right-color: rgb(119, 48, 152); border-left-color: rgb(119, 48, 152); text-align: center; width: 558.438px; display: flex; flex-direction: column; justify-content: center;">小结</h2><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">搞定~</p><p data-tool="mdnice编辑器" style="margin: 1em 4px; padding: 8px 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em; font-size: 16px; line-height: 26px; color: black;">Django-Q使用下来的体验还是不错的，足够轻量，部署足够方便，足以应付大部分场景了~</p><h2 data-tool="mdnice编辑器" style="margin: 1em auto; padding: 0.5em 0px; outline: 0px; font-weight: bold; font-size: 22px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; min-height: 32px; line-height: 28px; color: rgb(119, 48, 152); border-bottom: 1px solid rgb(119, 48, 152); border-top-color: rgb(119, 48, 152); border-right-color: rgb(119, 48, 152); border-left-color: rgb(119, 48, 152); text-align: center; width: 558.438px; display: flex; flex-direction: column; justify-content: center;">参考资料</h2><ul data-tool="mdnice编辑器" class=" list-paddingleft-2" style="list-style-type: disc;"><li><section style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px; text-align: left; color: rgb(1, 1, 1); font-weight: 500;">Django-Q官方文档：<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; text-decoration: underline; color: rgb(0, 122, 170);"><strong style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">https://django-q.readthedocs.io/en/latest/index.html</strong></span></section></li><li><section style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px; text-align: left; color: rgb(1, 1, 1); font-weight: 500;">Django-Q项目主页：<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; text-decoration: underline; color: rgb(0, 122, 170);"><strong style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">https://github.com/Koed00/django-q</strong></span></section></li><li><section style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px; text-align: left; color: rgb(1, 1, 1); font-weight: 500;">相关issues：<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; text-decoration: underline; color: rgb(0, 122, 170);"><strong style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">https://github.com/Koed00/django-q/issues/179</strong></span></section></li><li><section style="margin: 10px 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; line-height: 26px; text-align: left; color: rgb(1, 1, 1); font-weight: 500;">相关issues：<span style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; text-decoration: underline; color: rgb(0, 122, 170);"><strong style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important;">https://github.com/Koed00/django-q/issues/513</strong></span></section></li></ul></section><p style="margin: 0px 0px 24px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; clear: both; min-height: 1em;"><br style="margin: 0px; padding: 0px; outline: 0px; max-width: 100%; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgb(34, 34, 34); font-family: system-ui, -apple-system, BlinkMacSystemFont, &quot;Helvetica Neue&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, Arial, sans-serif; font-size: 17px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: 0.544px; orphans: 2; text-align: justify; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><br></p><p>文章转自：https://mp.weixin.qq.com/s/ciHJnOOO0GXkRihWTiX-fw</p>
                                    
                                </div>

                                <div class="container">
                                    <button type="button" class="btn btn-primary" title="加微信与站长交流" data-container="body" data-toggle="popover" data-placement="top" data-content="站长微信：VIPdjango">
                                        联系站长
                                    </button>

                                </div>
                                <script>
                                    $(function () {
                                        $("[data-toggle='popover']").popover();
                                    });
                                </script>

                                <div class="article__footer">
                                    <div class="tags"><b>上一篇：</b>
                                        
                                            <a href="show-34.html" class="article-tag">简单讲解Django分页Paginator和Page的用法</a>
                                        

                                    </div>
                                    <div class="tags"><b>下一篇：</b>
                                        
                                            <a href="show-37.html" class="article-tag">几个例子让新手快速了解Django REST Framework (DRF)</a>
                                        
                                    </div>
                                </div>
                            </div>
                        </article>
                        <!--  广告位置 -->
                        <section id="comments">
                            <div class="comments__container">
                                <h3>文章评论 <span class="comment__count">0</span></h3>
                                
                                    <div class="comment__add">
                                        <div class="login-card">
                                            <a href="login1.html" class="btn btn-primary btn-login"><span>登录评论</span></a>
                                        </div>
                                    </div>
                                
                                </div>
                                
<div class="comments__list-wrapper">
<div id="comment__preview" style="display: none"></div>
<ul class="comments__list">
    
</ul>
</div>


                                <div class="comments--legacy"></div>
                        </section>
                    </div>
                    <aside class="col-md-3 hidden-sm hidden-xs">
                        <div class="article__author">
                            <div class="user">
                                <div class="profile__user-avatar" style="background-image: url('static/image/timg.jpg')"></div>
                                <div class="profile__info">
                                    <div class="profile__name">吴秀峰</div>
                                    <div class="badges"><span class="badge admin-badge" data-type="admin"></span></div>
                                    <!-- <div class="profile__karma" title="Karma: 113">113</div> -->
                                </div>
                                <div class="profile__description">
                                    <p>当你的才华和能力还不足以支撑你的野心的时候，静下心来，学习！</p>
                                </div>
                                <!--'data-hide=meta data-default=#default-links'-->
                                <ul class="profile__links" style="">
                                    <li class="profile__link-item change-github" data-change="github" style="display: none;" data-modify="href"><a href="#" target="_blank" rel="nofollow noreferrer noopener" title="Github URL"> <span class="link__icon link__icon--github"></span>
                                        <div class="change-github" data-change="github"></div>
                                    </a></li>
                                    <li class="profile__link-item change-twitter" data-change="twitter" style="display: none;" data-modify="href"><a href="#" target="_blank" rel="nofollow noreferrer noopener" title="Twitter URL"> <span class="link__icon link__icon--twitter"></span>
                                        <div class="change-twitter" data-change="twitter"></div>
                                    </a></li>
                                    <li class="profile__link-item change-website" data-change="website" style="display: none;" data-modify="href"><a href="#" target="_blank" rel="nofollow noreferrer noopener" title="Website URL"> <span class="link__icon link__icon--website"></span>
                                        <div class="change-website" data-change="website"></div>
                                    </a></li>
                                </ul>
                            </div>
                        </div>

                        <div class="row">
                            <div class="section sticky-content">
                                <div>
                                    <div class="sidebar-articles-group">
                                        <div class="group-title"><strong>最新文章</strong> <a href="article.html">更多</a></div>
                                        <ul class="list-group">
                                            
                                                <li>

                                                    <a href="show-39.html">
                                                        <div class="list__left image-wrapper">
                                                            <div class="article__image" style="background-image: url('static/image/12653.png')"></div>

                                                        </div>
                                                        <div class="list__right">
                                                            <h4>Django5.0正式发布，是你期待的吗？</h4>
                                                        </div>
                                                    </a>
                                                </li>
                                            
                                                <li>

                                                    <a href="show-38.html">
                                                        <div class="list__left image-wrapper">
                                                            <div class="article__image" style="background-image: url('static/image/chatgpt.jpg')"></div>

                                                        </div>
                                                        <div class="list__right">
                                                            <h4>新手如何用Python玩转ChatGPT API,详细讲解</h4>
                                                        </div>
                                                    </a>
                                                </li>
                                            
                                                <li>

                                                    <a href="show-37.html">
                                                        <div class="list__left image-wrapper">
                                                            <div class="article__image" style="background-image: url('static/image/drf.jpg')"></div>

                                                        </div>
                                                        <div class="list__right">
                                                            <h4>几个例子让新手快速了解Django REST Framework (DRF)</h4>
                                                        </div>
                                                    </a>
                                                </li>
                                            
                                                <li>

                                                    <a href="show-36.html">
                                                        <div class="list__left image-wrapper">
                                                            <div class="article__image" style="background-image: url('static/image/python232323.jpg')"></div>

                                                        </div>
                                                        <div class="list__right">
                                                            <h4>提升效率,python的多线程详细使用方法</h4>
                                                        </div>
                                                    </a>
                                                </li>
                                            
                                                <li>

                                                    <a href="">
                                                        <div class="list__left image-wrapper">
                                                            <div class="article__image" style="background-image: url('static/image/djangoQ_Z4PNibz.jpg')"></div>

                                                        </div>
                                                        <div class="list__right">
                                                            <h4>Django-Q，轻量级消息队列Django-Q初体验</h4>
                                                        </div>
                                                    </a>
                                                </li>
                                            
                                                <li>

                                                    <a href="show-34.html">
                                                        <div class="list__left image-wrapper">
                                                            <div class="article__image" style="background-image: url('static/image/Paginator.jpg')"></div>

                                                        </div>
                                                        <div class="list__right">
                                                            <h4>简单讲解Django分页Paginator和Page的用法</h4>
                                                        </div>
                                                    </a>
                                                </li>
                                            
                                                <li>

                                                    <a href="show-33.html">
                                                        <div class="list__left image-wrapper">
                                                            <div class="article__image" style="background-image: url('https://www.django.cn/static/images/article_default.png')"></div>

                                                        </div>
                                                        <div class="list__right">
                                                            <h4>django4.0版本到底有哪些新功能和特性？</h4>
                                                        </div>
                                                    </a>
                                                </li>
                                            
                                                <li>

                                                    <a href="show-32.html">
                                                        <div class="list__left image-wrapper">
                                                            <div class="article__image" style="background-image: url('static/image/bushu.jpg')"></div>

                                                        </div>
                                                        <div class="list__right">
                                                            <h4>Django+uWSGI+nginx部署原理及工作流程</h4>
                                                        </div>
                                                    </a>
                                                </li>
                                            
                                                <li>

                                                    <a href="show-31.html">
                                                        <div class="list__left image-wrapper">
                                                            <div class="article__image" style="background-image: url('static/image/django-blog.jpg')"></div>

                                                        </div>
                                                        <div class="list__right">
                                                            <h4>Django入门视频教程之Blog开发详解</h4>
                                                        </div>
                                                    </a>
                                                </li>
                                            
                                                <li>

                                                    <a href="show-30.html">
                                                        <div class="list__left image-wrapper">
                                                            <div class="article__image" style="background-image: url('static/image/bt_django.jpg')"></div>

                                                        </div>
                                                        <div class="list__right">
                                                            <h4>使用宝塔面板快速部署Django项目</h4>
                                                        </div>
                                                    </a>
                                                </li>
                                            

                                        </ul>
                                    </div>
                                    <div class="sidebar-articles-group">
                                        <div class="group-title"><strong>论坛新帖</strong> <a href="forum.html">更多</a></div>
                                        <ul class="list-group">
                                            
                                                <li>
                                                    <a href="forum-69779.html" class="list-group-item article-sidebar-link">
                                                        <div class="list__left image-wrapper">
                                                            <div class="article__image" style="background-image: url('static/image/default.gif')"></div>
                                                            <!-- <img src="picture/add-input-mask-200_3.png" alt="" /> -->
                                                        </div>
                                                        <div class="list__right">
                                                            <h4>123</h4>
                                                        </div>
                                                    </a>
                                                </li>
                                            
                                                <li>
                                                    <a href="forum-69749.html" class="list-group-item article-sidebar-link">
                                                        <div class="list__left image-wrapper">
                                                            <div class="article__image" style="background-image: url('static/image/default.gif')"></div>
                                                            <!-- <img src="picture/add-input-mask-200_3.png" alt="" /> -->
                                                        </div>
                                                        <div class="list__right">
                                                            <h4>为什么每次只能导入一行数据呢？</h4>
                                                        </div>
                                                    </a>
                                                </li>
                                            
                                                <li>
                                                    <a href="forum-69325.html" class="list-group-item article-sidebar-link">
                                                        <div class="list__left image-wrapper">
                                                            <div class="article__image" style="background-image: url('static/image/default.gif')"></div>
                                                            <!-- <img src="picture/add-input-mask-200_3.png" alt="" /> -->
                                                        </div>
                                                        <div class="list__right">
                                                            <h4>请教下django查询问题，开始时间2023-7-15 00:00:00 结束时间2023-7-20 23:59:59，查询统计出每天的数据总和，并输出这几天每天的总和</h4>
                                                        </div>
                                                    </a>
                                                </li>
                                            
                                                <li>
                                                    <a href="forum-69324.html" class="list-group-item article-sidebar-link">
                                                        <div class="list__left image-wrapper">
                                                            <div class="article__image" style="background-image: url('static/image/default.gif')"></div>
                                                            <!-- <img src="picture/add-input-mask-200_3.png" alt="" /> -->
                                                        </div>
                                                        <div class="list__right">
                                                            <h4>请教：Invalid block tag on line 51: &#x27;empty&#x27;. Did you forget to register or load this tag?</h4>
                                                        </div>
                                                    </a>
                                                </li>
                                            
                                                <li>
                                                    <a href="forum-69323.html" class="list-group-item article-sidebar-link">
                                                        <div class="list__left image-wrapper">
                                                            <div class="article__image" style="background-image: url('static/image/default.gif')"></div>
                                                            <!-- <img src="picture/add-input-mask-200_3.png" alt="" /> -->
                                                        </div>
                                                        <div class="list__right">
                                                            <h4>Django如何实现视图函数被调用之后异步回调</h4>
                                                        </div>
                                                    </a>
                                                </li>
                                            
                                                <li>
                                                    <a href="forum-68919.html" class="list-group-item article-sidebar-link">
                                                        <div class="list__left image-wrapper">
                                                            <div class="article__image" style="background-image: url('static/image/default.gif')"></div>
                                                            <!-- <img src="picture/add-input-mask-200_3.png" alt="" /> -->
                                                        </div>
                                                        <div class="list__right">
                                                            <h4>我在用Django过程中碰到一个棘手的问题，关于SESSION_COOKIE_AGE</h4>
                                                        </div>
                                                    </a>
                                                </li>
                                            
                                                <li>
                                                    <a href="forum-68918.html" class="list-group-item article-sidebar-link">
                                                        <div class="list__left image-wrapper">
                                                            <div class="article__image" style="background-image: url('static/image/avatar_-_副本.jpg')"></div>
                                                            <!-- <img src="picture/add-input-mask-200_3.png" alt="" /> -->
                                                        </div>
                                                        <div class="list__right">
                                                            <h4>求教Python小版本更新升级</h4>
                                                        </div>
                                                    </a>
                                                </li>
                                            
                                                <li>
                                                    <a href="forum-68846.html" class="list-group-item article-sidebar-link">
                                                        <div class="list__left image-wrapper">
                                                            <div class="article__image" style="background-image: url('static/image/default.gif')"></div>
                                                            <!-- <img src="picture/add-input-mask-200_3.png" alt="" /> -->
                                                        </div>
                                                        <div class="list__right">
                                                            <h4>在pycharm中运行Django如何解决呢？</h4>
                                                        </div>
                                                    </a>
                                                </li>
                                            
                                                <li>
                                                    <a href="forum-68845.html" class="list-group-item article-sidebar-link">
                                                        <div class="list__left image-wrapper">
                                                            <div class="article__image" style="background-image: url('static/image/default.gif')"></div>
                                                            <!-- <img src="picture/add-input-mask-200_3.png" alt="" /> -->
                                                        </div>
                                                        <div class="list__right">
                                                            <h4>项目启动失败</h4>
                                                        </div>
                                                    </a>
                                                </li>
                                            
                                                <li>
                                                    <a href="forum-68844.html" class="list-group-item article-sidebar-link">
                                                        <div class="list__left image-wrapper">
                                                            <div class="article__image" style="background-image: url('static/image/default.gif')"></div>
                                                            <!-- <img src="picture/add-input-mask-200_3.png" alt="" /> -->
                                                        </div>
                                                        <div class="list__right">
                                                            <h4>json解析错误</h4>
                                                        </div>
                                                    </a>
                                                </li>
                                            

                                        </ul>
                                    </div>
                                </div>
                            <div class="sidebar-articles-group sidebar-videos">
                                    <div class="group-title">
                                        <strong>视频教程</strong>
                                        <a class="subscribe-link" target="_blank" href="video.html">更多</a>
                                    </div>
                                    <ul class="sidebar-video-thumbnails">
                                        
                                        <li>
                                            <a target="_blank" href="video-3.html">
                                                <img class="video-thumb" src="static/picture/api.jpg">
                                            </a>
                                            <a target="_blank" href="video-3.html">
                                                <h4 class="video-title">Django+DRF+Vue打造专业的API自动化测试平台</h4>
                                            </a>
                                        </li>
                                        
                                        <li>
                                            <a target="_blank" href="video-2.html">
                                                <img class="video-thumb" src="static/picture/djangovue_H3w7CBm.jpg">
                                            </a>
                                            <a target="_blank" href="video-2.html">
                                                <h4 class="video-title">django+vue前后端分离仿美团外卖电商项目</h4>
                                            </a>
                                        </li>
                                        
                                        <li>
                                            <a target="_blank" href="video-1.html">
                                                <img class="video-thumb" src="static/picture/qiyekaifa.jpg">
                                            </a>
                                            <a target="_blank" href="video-1.html">
                                                <h4 class="video-title">django企业项目开发实战案例视频教程</h4>
                                            </a>
                                        </li>
                                        

                                    </ul>

                                </div>
                            </div>
                        </div>
                    </aside>
                </div>
            </div>
        </div>
    </main>

    
    <footer>
	 <h3>加入Django中文交流社区，分享交流，携手同行</h3>

	  <ul class="list-inline">
				<li><a href="index.html" class="neon">首 页</a></li>
				<li><a href="article.html" class="neon">文 章</a></li>
                <li><a href="course.html" class="neon">教 程</a></li>
                <li><a href="video.html" class="neon">视 频</a></li>
				<li><a href="forum.html" class="neon">社 区</a></li>
				<li><a href="about.html" class="neon">关于我们</a></li>
				<li><a href="contact.html" class="neon">联系我们</a></li>

	  </ul>

		<p class="copyright">Copyright © 2018 <a href="index1.html" target="_blank">django.cn</a>
			<span class="second-line">All Rights Reserved.</span><br>
            Powered by <a href="index.html">Django3</a><br>
           <a href="https://beian.miit.gov.cn" target="_blank">备案号：湘ICP备17023990号-1</a>
		</p>
</footer>

</div>

    <!-- JavaScripts -->

    <script type="text/javascript">

  $('#confirm-delete').on('show.bs.modal', function (event) {
  var button = $(event.relatedTarget) // Button that triggered the modal
  // var recipient = button.data('whatever') // Extract info from data-* attributes
  // If necessary, you could initiate an AJAX request here (and then do the updating in a callback).
  // Update the modal's content. We'll use jQuery here, but you could use a data binding library or other methods instead.
  var aid = button.data('aid')
  var id = button.data('id')
  var tag = button.data('tag')
  var modal = $(this)
  // modal.find('.modal-title').text('New message to ' + recipient)
  modal.find('input[name="aid"]').val(aid)
  modal.find('input[name="id"]').val(id)
  modal.find('input[name="tag"]').val(tag)

  // console.log('ok')
})

  // btn_delete_comment
  $('#btn_delete_comment').click(function(event){
    // var form = new FormData(document.getElementById("delete_comment"))
    // var pwd1 = $('#change-pwd [name="password1"]').val()
    console.log('in comment delete')
    var aid = $('#delete_comment [name="aid"]').val()
    var id = $('#delete_comment [name="id"]').val()
    var tag = $('#delete_comment [name="tag"]').val()
    var token = $('#delete_comment [name="csrfmiddlewaretoken"]').val()
    if(!tag){
        return
    }

    var form = new FormData();
    form.append("id", 'id');
    form.append("csrfmiddlewaretoken", token);
    form.append('method','delete')

        $.ajax({
            type: 'POST',
            url: '/comment/'+id+'/',
            // data:'json',
            processData: false,
            contentType: false,
            data: form,
            success: function(response) {
                if(tag == 'forum'){
                    window.location.href = '/forum/forum-'+aid+'.html';
                }
                if(tag == 'article'){
                    window.location.href = '/article/show-'+aid+'.html';
                }
                if(tag == 'course'){
                    window.location.href = '/course/show-'+aid+'.html';
                }
            }
        })
  })
</script>
 <script src="static/js/bundle.js"></script>
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
</body>
</html>
