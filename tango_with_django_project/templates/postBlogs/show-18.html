
<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="baidu-site-verification" content="TcPgCnDcOJ">
    <link rel="apple-touch-icon" href="https://www.django.cn/static/images/icon-touch.png">
    <link rel="icon" sizes="192x192" href="https://www.django.cn/static/images/icon-touch.png">
    <link rel="shortcut icon" href="https://www.django.cn/static/images/favicon.ico">
    
    <title>Django身份认证系统auth模块详解-Django社区,Django中文网,django教程,Django！</title>
    <meta name="keywords" content="Django身份认证系统，Django用户认证系统">
    <meta name="description" content="Django 带有一个用户认证系统。用于处理用户帐户，组，权限和基于 cookie 的用户会话。本文档的这一部分解释了默认实现如何开箱即用，以及如何扩展和定制它以适应您的项目需求。">

    <meta name="theme-color" content="#ffffff">
    <link href="static/css/fonts.css" rel="stylesheet">
    <link href="static/css/bootstrap.min.css" rel="stylesheet">
    <link href="static/css/toastr.min.css" rel="stylesheet">
    <link href="static/css/app.css" rel="stylesheet">
    <link href="static/css/font-awesome.min.css" rel="stylesheet">
     
    <script src="static/js/jquery.min.js"></script>
    <script src="static/js/bootstrap.min.js"></script>
    <script src="static/js/highlight.min.js"></script>
    <script src="static/js/toastr.min.js"></script>

   <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?9b0ccd50ff8935f331889174a8280dc2";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

</head>
<body>
<div class="modal fade" id="confirm-delete" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <div style='text-align: center;font-size: 20px'>确定删除?</div>
            </div>
            <div class="modal-footer">
                <form action="/comment/" method="POST" id='delete_comment' style='float: left'>
                    <input type="hidden" name="csrfmiddlewaretoken" value="aSYCI9EyK9CbQZzArerVVDFu3w9vn9TsCdkiyUh3jL8TMYT7TpY8kpUPWactWjY9">
                    <input type="hidden" name="tag">
                    <input type="hidden" name="aid">
                    <input type="hidden" name="id">
                    <input type="hidden" name="method" value='delete'>
                    <input type='button' class="btn btn-danger btn-ok" id='btn_delete_comment' value='删除'>
                </form>
                <!-- <a class="btn btn-danger btn-ok"><span>删除</span></a> -->
                <button type="button" class="btn btn-default" data-dismiss="modal"><span>取消</span></button>
            </div>
        </div>
    </div>
</div>


    <div class="page__wrapper page--landing">
   
    <header class="header--main animate-search">

    
    <div class="container-fluid">
        <nav class="nav--main">
            <div class="nav__logo">
                <a href="index.html">
                    <span>Django中文网</span>
                </a>
            </div>

            
                <ul class="nav__items nav__items--right">
                    <li class="nav__item">
                        <a href="search.html" class="search-trigger icon-magnifier"></a>
                    </li>
                    <li id="login" class="nav__item">
                        <a href="login.html">
                            登录
                        </a>
                    </li>
                    <li id="register" class="nav__item">
                        <a href="register.html">
                            <span class="btn btn-success">注册</span>
                        </a>
                    </li>
                </ul>

            

            <ul class="nav__items nav__items--left">
                <li class="nav__item nav__item--main">
                    <a href="article.html" class="articles ">
                        文章
                    </a>
                </li>
                 <li class="nav__item nav__item--main">
                    <a href="course.html" class="posts ">
                        教程
                    </a>
                </li>
                <li class="nav__item nav__item--main">
                    <a href="video.html" class="posts ">
                        视频
                    </a>
                </li>
                <li class="nav__item nav__item--main">
                     <a href="forum.html" class="posts ">
                        社区
                    </a>
                </li>
            </ul>


        </nav> <!-- .nav--main -->
    </div>


    <a href="#0" class="nav-trigger icon-menu"></a>

    <div id="search" class="main-search">
    <div class="container-fluid">
        <form id="search-form-top" class="form__search" action="/search/" method="GET">
        <input type="search" name="search" placeholder="Search..." value="" autocomplete="off" required="">

</form>

        <div class="search-suggestions">

        </div>
        <a href="#0" class="close text-replace">Close Form</a>
    </div>
</div> <!-- .main-search -->
</header>

<div class="cover-layer"></div> <!-- cover main content when search form is open -->


    
    <div class="cover-layer"></div>
    <!-- cover main content when search form is open -->
    <main class="main-content" style=" margin-top:40px;">
        <div class="content-wrapper">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-9 article-content">
                        <article class="article--big">
                            <!--<a href="https://jq.qq.com/?_wv=1027&k=0kNpqlZH" target="_blank"><img src="/static/img/web2.jpg"> </a>-->
                            
                                <div class="article__image" style="background-image: url(static/image/auth.jpg)"></div>
                            
                            <div class="article__content">
                                <h1 class="article__title">
                                    Django身份认证系统auth模块详解

                                </h1>
                                <div class="article__header">
                                    <div class="article__date">
                                        <time>2018年09月26日</time>
                                    </div>
                                    <div class="article__date">点击次数：25784 </div>
                                </div>
                                <div class="article__body">
                                    
                                    <h1 id="django-中的身份认证">Django 中的身份认证</h1><p>Django 带有一个用户认证系统。用于处理用户帐户，组，权限和基于 cookie 的用户会话。本文档的这一部分解释了默认实现如何开箱即用，以及如何扩展和定制它以适应您的项目需求。</p><h2 id="概览">概览</h2><p>认证系统由以下部分组成：</p><ul class=" list-paddingleft-2"><li><p>用户(Users)</p></li><li><p>权限(Permissions)：标志指定用户是否可以执行特定任务。</p></li><li><p>组(Groups)：将标签和权限应用于多个用户的通用方式。</p></li><li><p>一个可配置的密码散列系统</p></li><li><p>表单和查看工具，用于登录用户或限制内容</p></li><li><p>可插入的后端系统</p></li></ul><p>Django 中的认证系统的目标是非常通用，并且不提供 Web 认证系统中常见的一些功能。第三方软件包已经实施了一些常见问题的解决方案：</p><ul class=" list-paddingleft-2"><li><p>密码强度检查</p></li><li><p>限制登录尝试</p></li><li><p>针对第三方的身份认证（例如，OAuth）</p></li></ul><h2 id="安装">安装</h2><p>身份认证 ( Authentication ) 在 <code>django.contrib.auth</code> 中作为 Django contrib 模块捆绑在一起。默认情况下，所需的配置已包含在由 <code>django-admin startproject</code> 生成的 <code>settings.py</code> 中，这些配置由 <code>INSTALLED_APPS</code> setting 中列出的两个项目组成：</p><ol class=" list-paddingleft-2"><li><p><code>&#39;django.contrib.auth&#39;</code> 包含身份认证 ( authentication ) 框架的核心，以及它的默认模型。</p></li><li><p><code>&#39;django.contrib.contenttypes&#39;</code> 是 Django 内容类型系统，它允许权限与您创建的模型相关联。</p></li></ol><p>以及 <code>MIDDLEWARE</code> setting 中的这些项目：</p><ol class=" list-paddingleft-2"><li><p><code>SessionMiddleware</code> 管理跨请求的会话。</p></li><li><p><code>AuthenticationMiddleware</code> 使用会话将用户与请求相关联。</p></li></ol><p>使用这些设置后，运行命令 <code>manage.py migrate</code> 将为 auth 相关模型创建必要的数据库表，并为安装的应用程序中定义的模型创建权限。</p><h1 id="使用-django-身份认证系统">使用 Django 身份认证系统</h1><p>本文档解释了 Django 认证系统在其默认配置中的用法。这种配置已经发展到满足最常见的项目需求，处理合理范围广泛的任务，并且仔细实现了密码和权限。对于认证需求与默认不同的项目，Django 支持广泛的扩展和定制认证。</p><p>Django 中的认证系统认证和授权在一起，因为这些功能有些耦合。</p><h2 id="user-对象">User 对象</h2><p><code>User</code> 对象是认证系统的核心。他们通常代表与您的网站进行互动的人，并用于实现限制访问，注册用户信息，将内容与创作者相关联等。在 Django 的身份验证框架中只存在一类用户，即 <code>&#39;superusers&#39;</code> 或 admin <code>&#39;staff&#39;</code> 用户是具有特殊属性集的用户对象，而不是不同类的用户对象。</p><p>默认用户的主要属性是：</p><ul class=" list-paddingleft-2"><li><p><code>username</code></p></li><li><p><code>password</code></p></li><li><p><code>email</code></p></li><li><p><code>first_name</code></p></li><li><p><code>last_name</code></p></li></ul><h3 id="创建用户">创建用户</h3><p>创建用户最直接的方法是使用包含的 <code>create_user()</code> 辅助函数：</p><pre data-lang="python">&gt;&gt;&gt;&nbsp;from&nbsp;django.contrib.auth.models&nbsp;import&nbsp;User
&gt;&gt;&gt;&nbsp;user&nbsp;=&nbsp;User.objects.create_user(&#39;john&#39;,&nbsp;&#39;lennon@thebeatles.com&#39;,&nbsp;&#39;johnpassword&#39;)

#&nbsp;At&nbsp;this&nbsp;point,&nbsp;user&nbsp;is&nbsp;a&nbsp;User&nbsp;object&nbsp;that&nbsp;has&nbsp;already&nbsp;been&nbsp;saved
#&nbsp;to&nbsp;the&nbsp;database.&nbsp;You&nbsp;can&nbsp;continue&nbsp;to&nbsp;change&nbsp;its&nbsp;attributes
#&nbsp;if&nbsp;you&nbsp;want&nbsp;to&nbsp;change&nbsp;other&nbsp;fields.
&gt;&gt;&gt;&nbsp;user.last_name&nbsp;=&nbsp;&#39;Lennon&#39;
&gt;&gt;&gt;&nbsp;user.save()</pre><h3 id="创建超级用户">创建超级用户</h3><p>使用 <code>createsuperuser</code> 命令创建超级用户：</p><pre data-lang="python">$&nbsp;python&nbsp;manage.py&nbsp;createsuperuser&nbsp;--username=joe&nbsp;--email=vip@django.cn</pre><p>系统会提示您输入密码。输入之后，用户将立即被创建。如果您不使用 <code>--username</code> 或 <code>--email</code> 选项，它会提示您输入这些值。</p><h3 id="更改密码">更改密码</h3><p>Django 不会在用户模型中存储原始（纯文本）密码，而只存储哈希值。因此，请勿尝试直接操作用户的密码属性。这就是创建用户时使用帮助函数的原因。</p><p>要更改用户的密码，您有几个选择：</p><p><code>manage.py changepassword &lt;username&gt;</code> 提供了一种从命令行更改用户密码的方法。它会提示您更改您必须输入两次的给定用户的密码。如果两者都匹配，则新密码将立即更改。如果您不提供用户，则该命令将尝试更改其用户名与当前系统用户匹配的密码。</p><p>您还可以使用 <code>set_password()</code> 以编程方式更改密码：</p><pre data-lang="python">&gt;&gt;&gt;&nbsp;from&nbsp;django.contrib.auth.models&nbsp;import&nbsp;User&nbsp;
&gt;&gt;&gt;&nbsp;u&nbsp;=&nbsp;User.objects.get(username=&#39;john&#39;)&nbsp;
&gt;&gt;&gt;&nbsp;u.set_password(&#39;new&nbsp;password&#39;)&nbsp;
&gt;&gt;&gt;&nbsp;u.save()</pre><p>如果您安装了 Django admin，您还可以在认证系统的管理页面上更改用户的密码。</p><p>Django 还提供了可用于允许用户更改自己的密码的视图和表单。</p><p>更改用户的密码将注销其所有会话。</p><h3 id="用户认证">用户认证</h3><p><code>authenticate(request=None, **credentials)</code></p><p>使用 <code>authenticate()</code> 来验证一组凭据。它将凭据作为关键字参数，默认情况下是 <code>username</code> 和 <code>password</code>，并针对每个验证后端进行检查，并在凭据对后端有效时返回 <code>User</code> 对象。如果凭证对任何后端无效，或者后端引发 <code>PermissionDenied</code>，则返回 <code>None</code>。例如：</p><pre data-lang="python">from&nbsp;django.contrib.auth&nbsp;import&nbsp;authenticate
user&nbsp;=&nbsp;authenticate(username=&#39;john&#39;,&nbsp;password=&#39;secret&#39;)
if&nbsp;user&nbsp;is&nbsp;not&nbsp;None:
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;A&nbsp;backend&nbsp;authenticated&nbsp;the&nbsp;credentials
else:
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;No&nbsp;backend&nbsp;authenticated&nbsp;the&nbsp;credentials</pre><p><code>request</code> 是在身份验证后端的 <code>authenticate()</code> 方法上传递的可选 <code>HttpRequest</code>。</p><blockquote><p>这是验证一组凭据的低级别方法;例如，它由 <code>RemoteUserMiddleware</code> 使用。除非你正在编写你自己的认证系统，否则你可能不会使用它。</p></blockquote><p>后面内容如果使用 DRF 框架，基本用不到了，所以省略咯～</p><h1 id="djangocontribauth-模块">django.contrib.auth 模块</h1><h2 id="user-模型">User 模型</h2><h3 id="字段">字段</h3><p><code>username</code></p><p>必须。150 个字符或更少。用户名可能包含字母数字，<code>_</code>，<code>@</code>，<code>+</code>，。和 <code>-</code> 字符。如果您使用的 MySQL，请指定 <code>max_length=191</code>，因为默认情况下，MySQL 只能创建 191 个字符的唯一索引。</p><p><code>first_name</code></p><p>可选 (<code>blank=True</code>)。 30 个字符或更少。</p><p><code>last_name</code></p><p>可选 (<code>blank=True</code>)。 150 个字符或更少。</p><p><code>email</code></p><p>可选 (<code>blank=True</code>)。邮箱地址。</p><p><code>password</code></p><p>必须。密码的散列和元数据。（Django 不存储原始密码。）原始密码可以是任意长的，并且可以包含任何字符。</p><p><code>groups</code></p><p>多对多关系 <code>Group</code></p><p><code>user_permissions</code></p><p>多对多关系 <code>Permission</code></p><p><code>is_staff</code></p><p>Bollean 类型。指定此用户是否可以访问 admin 站点。</p><p><code>is_active</code></p><p>Bollean 类型。指定是否应将此用户帐户视为活动用户。我们建议您将此标志设置为 <code>False</code> 而不是删除帐户;这样，如果您的应用程序对用户有任何外键，外键不会中断。</p><p><code>is_superuser</code></p><p>Bollean 类型。指定该用户具有所有权限而不明确分配它们。</p><p><code>last_login</code></p><p>用户上次登录的日期时间。</p><p><code>date_joined</code></p><p>指定帐户何时创建的日期时间。在创建帐户时默认设置为当前日期/时间。</p><h3 id="属性">属性</h3><p><code>is_authenticated</code></p><p>只读属性始终为 <code>True</code>（与 <code>AnonymousUser.is_authenticated</code> 相反，它始终为 <code>False</code>）。这是判断用户是否已通过身份验证的一种方式。这并不意味着任何权限，也不会检查用户是否处于活动状态或是否有有效的会话。</p><p><code>is_anonymous</code></p><p>只读属性始终为 <code>False</code>。这是区分 <code>User</code> 和 <code>AnonymousUser</code> 对象的一种方式。通常，您应该更喜欢使用 <code>is_authenticated</code> 属性。</p><h3 id="方法">方法</h3><p><code>get_username()</code></p><p>返回用户的用户名。由于 <code>User</code> 模型可以被换出，您应该使用此方法而不是直接引用 <code>username</code> 属性。</p><p><code>get_full_name()</code></p><p>返回 <code>first_name</code> 加上 <code>last_name</code>，之间有一个空格。</p><p><code>get_short_name()</code></p><p>返回 <code>first_name</code>。</p><p><code>set_password(raw_password)</code></p><p>将用户的密码设置为给定的原始字符串，注意密码散列。不保存用户对象。</p><p>当 <code>raw_password</code> 为 <code>None</code> 时，密码将被设置为不可用的密码，就像使用 <code>set_unusable_password()</code> 一样。</p><p><code>check_password(raw_password)</code></p><p>如果给定的原始字符串是用户的正确密码，则返回 <code>True</code>。（在进行比较时，会将密码哈希处理。）</p><p><code>set_unusable_password()</code></p><p>标记用户没有设置密码。这与为密码输入空白字符串不同。该用户的 <code>check_password()</code> 将永远不会返回 <code>True</code>。不保存 <code>User</code> 对象。</p><p>如果您的应用程序的身份验证是针对现有的外部源（例如 LDAP 目录）进行的，您可能需要使用此功能。</p><p><code>has_usable_password()</code></p><p>如果为此用户调用了 <code>set_unusable_password()</code>，则返回 <code>False</code>。</p><p><code>email_user(subject, message, from_email=None, **kwargs)</code></p><p>向用户发送电子邮件。</p><h3 id="manager-方法">Manager 方法</h3><p><code>class models.UserManager</code></p><p><code>User</code> 模型有一个自定义管理器，它具有以下辅助方法（除了由 <code>BaseUserManager</code> 提供的方法外）：</p><p><code>create_user(username, email=None, password=None, **extra_fields)</code></p><p>创建，保存并返回 <code>User</code>。</p><p><code>username</code> 和 <code>password</code> 设置为给定。 <code>email</code> 的域部分将自动转换为小写，并且返回的 <code>User</code> 对象将 <code>is_active</code> 设置为 <code>True</code>。</p><p>如果未提供密码，则将调用 <code>set_unusable_password()</code>。</p><p><code>extra_fields</code> 关键字参数传递给 <code>User</code> 的 <code>__init__</code> 方法，以允许在自定义用户模型上设置任意字段。</p><p><code>create_superuser(username, email, password, **extra_fields)</code></p><p>与 <code>create_user()</code> 相同，但将 <code>is_staff</code> 和 <code>is_superuser</code> 设置为 <code>True</code>。</p><h2 id="实用函数">实用函数</h2><p><code>get_user(request)</code></p><p>返回与给定请求的会话关联的用户模型实例。</p><p>它检查存储在会话中的认证后端是否存在于 <code>AUTHENTICATION_BACKENDS</code> 中。如果存在，它使用后端的 <code>get_user()</code> 方法来检索用户模型实例，然后通过调用用户模型的 <code>get_session_auth_hash()</code> 方法来验证会话。</p><p>如果存储在会话中的认证后端不再位于 <code>AUTHENTICATION_BACKENDS</code> 中，如果用户未由后端的 <code>get_user()</code> 方法返回，或者如果会话认证哈希未验证，则返回 <code>AnonymousUser</code> 的实例。</p><h1 id="自定义-django-中的认证机制">自定义 Django 中的认证机制</h1><h2 id="其他身份认证来源">其他身份认证来源</h2><h3 id="指定身份认证后端">指定身份认证后端</h3><p>在幕后，Django 维护着一个 “身份认证后端” 列表，用于检查身份认证。当有人调用 <code>django.contrib.auth.authenticate()</code> 时，Django 尝试在所有身份验证后端进行身份验证。如果第一个验证方法失败，Django 会尝试第二个验证方法，依此类推，直到尝试完所有后端。</p><p>在 <code>AUTHENTICATION_BACKENDS</code> setting 中指定要使用的身份验证后端列表。这应该是一个 Python 路径名列表，指向知道如何进行身份验证的 Python 类。这些类可以在你的 Python 路径上的任何地方。</p><p>默认情况下，<code>AUTHENTICATION_BACKENDS</code> 被设置为：</p><pre data-lang="python">[&#39;django.contrib.auth.backends.ModelBackend&#39;]</pre><p>这是检查 Django 用户数据库并查询内置权限的基本身份验证后端。它不提供通过任何速率限制机制防止暴力攻击的保护。您可以在自定义身份验证后端实现自己的速率限制机制，也可以使用大多数 Web 服务器提供的机制。</p><p><code>AUTHENTICATION_BACKENDS</code> 的顺序很重要，所以如果相同的用户名和密码在多个后端有效，Django 将在第一次正确匹配时停止处理。</p><p>如果后端引发 <code>PermissionDenied</code> 异常，认证将立即失败。 Django 不会检查后面的后端。</p><h3 id="编写身份认证后端">编写身份认证后端</h3><p>认证后端是一个实现两个必需方法的类：<code>get_user(user_id)</code> 和 <code>authenticate(request, **credentials)</code>，以及一组可选的与权限相关的授权方法。</p><p><code>get_user</code> 方法需要一个 <code>user_id</code> - 可以是一个用户名，数据库 ID 或其他，但必须是用户对象的主键，并返回一个用户对象。</p><p><code>authenticate</code> 方法将 <code>request</code> 参数和凭据作为关键字参数。大多数情况下，它看起来像这样：</p><pre data-lang="python">class&nbsp;MyBackend:
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;authenticate(self,&nbsp;request,&nbsp;username=None,&nbsp;password=None):
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Check&nbsp;the&nbsp;username/password&nbsp;and&nbsp;return&nbsp;a&nbsp;user.
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...</pre><p>但它也可以验证 token，如下所示：</p><pre data-lang="python">class&nbsp;MyBackend:
&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;authenticate(self,&nbsp;request,&nbsp;token=None):
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Check&nbsp;the&nbsp;token&nbsp;and&nbsp;return&nbsp;a&nbsp;user.
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...</pre><p>无论使用哪种方式，<code>authenticate()</code> 都应该检查它获取的凭据，并在凭证有效时返回与这些凭证相匹配的用户对象。如果它们无效，则应返回 <code>None</code>。</p><p><code>request</code> 是一个 <code>HttpRequest</code>，如果没有提供给 <code>authenticate()</code>（将其传递给后端），它可能是 <code>None</code>。</p><p>Django admin 与 Django <code>User</code> 对象紧密耦合。处理这个问题的最好方法是为每个存在于后端的用户创建一个 Django <code>User</code> 对象（例如，在您的 LDAP 目录，外部 SQL 数据库等中）。您可以编写脚本来提前执行此操作，或者您的 <code>authenticate</code> 方法可以在用户第一次登录时执行。</p><p>以下是一个示例后端，它会根据 <code>settings.py</code> 文件中定义的用户名和密码变量进行身份验证，并在用户首次进行身份验证时创建一个 Django <code>User</code> 对象：</p><pre data-lang="python">from&nbsp;django.conf&nbsp;import&nbsp;settings
from&nbsp;django.contrib.auth.hashers&nbsp;import&nbsp;check_password
from&nbsp;django.contrib.auth.models&nbsp;import&nbsp;User

class&nbsp;SettingsBackend:
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;
&nbsp;&nbsp;&nbsp;&nbsp;Authenticate&nbsp;against&nbsp;the&nbsp;settings&nbsp;ADMIN_LOGIN&nbsp;and&nbsp;ADMIN_PASSWORD.

&nbsp;&nbsp;&nbsp;&nbsp;Use&nbsp;the&nbsp;login&nbsp;name&nbsp;and&nbsp;a&nbsp;hash&nbsp;of&nbsp;the&nbsp;password.&nbsp;For&nbsp;example:

&nbsp;&nbsp;&nbsp;&nbsp;ADMIN_LOGIN&nbsp;=&nbsp;&#39;admin&#39;
&nbsp;&nbsp;&nbsp;&nbsp;ADMIN_PASSWORD&nbsp;=&nbsp;&#39;pbkdf2_sha256$30000$Vo0VlMnkR4Bk$qEvtdyZRWTcOsCnI/oQ7fVOu1XAURIZYoOZ3iq8Dr4M=&#39;
&nbsp;&nbsp;&nbsp;&nbsp;&quot;&quot;&quot;

&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;authenticate(self,&nbsp;request,&nbsp;username=None,&nbsp;password=None):
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;login_valid&nbsp;=&nbsp;(settings.ADMIN_LOGIN&nbsp;==&nbsp;username)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pwd_valid&nbsp;=&nbsp;check_password(password,&nbsp;settings.ADMIN_PASSWORD)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;login_valid&nbsp;and&nbsp;pwd_valid:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;user&nbsp;=&nbsp;User.objects.get(username=username)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;User.DoesNotExist:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Create&nbsp;a&nbsp;new&nbsp;user.&nbsp;There&#39;s&nbsp;no&nbsp;need&nbsp;to&nbsp;set&nbsp;a&nbsp;password
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;because&nbsp;only&nbsp;the&nbsp;password&nbsp;from&nbsp;settings.py&nbsp;is&nbsp;checked.
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;user&nbsp;=&nbsp;User(username=username)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;user.is_staff&nbsp;=&nbsp;True
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;user.is_superuser&nbsp;=&nbsp;True
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;user.save()
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;user
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;None

&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;get_user(self,&nbsp;user_id):
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;User.objects.get(pk=user_id)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;User.DoesNotExist:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;None</pre><h2 id="扩展现有的-user-模型">扩展现有的 User 模型</h2><p>有两种方法可以扩展默认 <code>User</code> 模型，而不用替换自己的模型。如果您需要的更改是纯粹的行为，并且不需要对存储在数据库中的内容进行任何更改，则可以基于 <code>User</code> 创建代理模型。这允许代理模型提供的任何功能，包括默认排序，自定义管理器或自定义模型方法。</p><p>如果您希望存储与 <code>User</code> 相关的信息，则可以将 <code>OneToOneField</code> 用于包含字段的模型以获取更多信息。这种一对一模式通常称为 profile 模型，因为它可能存储有关站点用户的非 auth 相关信息。例如，您可以创建一个 <code>Employee</code> 模型：</p><pre data-lang="python">from&nbsp;django.contrib.auth.models&nbsp;import&nbsp;User

class&nbsp;Employee(models.Model):
&nbsp;&nbsp;&nbsp;&nbsp;user&nbsp;=&nbsp;models.OneToOneField(User,&nbsp;on_delete=models.CASCADE)
&nbsp;&nbsp;&nbsp;&nbsp;department&nbsp;=&nbsp;models.CharField(max_length=100)</pre><p>假设现有员工 Fred Smith 拥有 <code>User</code> 和 <code>Employee</code> 模型，则可以使用 Django 的标准相关模型约定访问相关信息：</p><pre data-lang="python">&gt;&gt;&gt;&nbsp;u&nbsp;=&nbsp;User.objects.get(username=&#39;fsmith&#39;)&nbsp;
&gt;&gt;&gt;&nbsp;freds_department&nbsp;=&nbsp;u.employee.department</pre><p>要将 profile 模型的字段添加到 admin 的用户页面，请在应用程序的 <code>admin.py</code> 中定义 <code>InlineModelAdmin</code>（对于本示例，我们将使用 <code>StackedInline</code>），并将其添加到 <code>UserAdmin</code> 类，该类用 <code>User</code> 类注册：</p><pre data-lang="python">from&nbsp;django.contrib&nbsp;import&nbsp;admin
from&nbsp;django.contrib.auth.admin&nbsp;import&nbsp;UserAdmin&nbsp;as&nbsp;BaseUserAdmin
from&nbsp;django.contrib.auth.models&nbsp;import&nbsp;User

from&nbsp;my_user_profile_app.models&nbsp;import&nbsp;Employee

#&nbsp;Define&nbsp;an&nbsp;inline&nbsp;admin&nbsp;descriptor&nbsp;for&nbsp;Employee&nbsp;model
#&nbsp;which&nbsp;acts&nbsp;a&nbsp;bit&nbsp;like&nbsp;a&nbsp;singleton
class&nbsp;EmployeeInline(admin.StackedInline):
&nbsp;&nbsp;&nbsp;&nbsp;model&nbsp;=&nbsp;Employee
&nbsp;&nbsp;&nbsp;&nbsp;can_delete&nbsp;=&nbsp;False
&nbsp;&nbsp;&nbsp;&nbsp;verbose_name_plural&nbsp;=&nbsp;&#39;employee&#39;

#&nbsp;Define&nbsp;a&nbsp;new&nbsp;User&nbsp;admin
class&nbsp;UserAdmin(BaseUserAdmin):
&nbsp;&nbsp;&nbsp;&nbsp;inlines&nbsp;=&nbsp;(EmployeeInline,&nbsp;)

#&nbsp;Re-register&nbsp;UserAdmin
admin.site.unregister(User)
admin.site.register(User,&nbsp;UserAdmin)</pre><p>这些 profile 模型在任何方面都不是特别的 - 它们只是恰好与用户模型具有一对一链接的 Django 模型。因此，它们不会在创建用户时自动创建，但可以根据需要使用 <code>django.db.models.signals.post_save</code> 来创建或更新相关模型。</p><p>使用相关模型会产生额外的查询或连接来检索相关数据。根据您的需要，包含相关字段的自定义用户模型可能是您更好的选择，但是，与项目应用程序中默认用户模型的现有关系可能会证明额外的数据库负载。</p><h2 id="替换自定义-user-模型">替换自定义 <code>User</code> 模型</h2><p>某些类型的项目可能具有身份验证要求，而 Django 的内置 <code>User</code> 模型并不总是适合的。例如，在一些网站上，使用电子邮件地址作为您的身份标记而不是用户名更有意义。</p><p>Django 允许您通过为引用自定义模型的 <code>AUTH_USER_MODEL</code> setting 提供值来覆盖默认用户模型：</p><pre data-lang="python">AUTH_USER_MODEL&nbsp;=&nbsp;&#39;myapp.MyUser&#39;</pre><p>myapp 表示 Django 应用程序的名称（它必须位于 <code>INSTALLED_APPS</code> 中），MyUser 是用作用户模型的 Django 模型的名称。</p><h3 id="启动项目时使用自定义用户模型">启动项目时使用自定义用户模型</h3><p>如果您正在开始一个新项目，强烈建议设置一个自定义用户模型，即使默认的用户模型对您来说已经足够。此模型的行为与默认用户模型的行为相同，但如果需要，您可以在将来自定义它：</p><pre data-lang="python">from&nbsp;django.contrib.auth.models&nbsp;import&nbsp;AbstractUser

class&nbsp;User(AbstractUser):
&nbsp;&nbsp;&nbsp;&nbsp;pass</pre><p>不要忘记指向 <code>AUTH_USER_MODEL</code>。在创建任何迁移或首次运行 <code>manage.py migrate</code> 之前执行此操作。</p><p>另外，请在应用程序的 <code>admin.py</code> 中注册模型：</p><pre data-lang="python">from&nbsp;django.contrib&nbsp;import&nbsp;admin
from&nbsp;django.contrib.auth.admin&nbsp;import&nbsp;UserAdmin
from&nbsp;.models&nbsp;import&nbsp;User

admin.site.register(User,&nbsp;UserAdmin)</pre><h3 id="引用-user-模型">引用 User 模型</h3><p>如果直接引用 <code>User</code> （例如，通过在外键中引用），那么您的代码将不适用于 <code>AUTH_USER_MODEL</code> setting 已更改为不同用户模型的项目。</p><p><code>get_user_model()</code></p><p>不要直接引用 <code>User</code>，而应该使用 <code>django.contrib.auth.get_user_model()</code> 引用 <code>User</code> 模型。此方法将返回当前活动的用户模型 - 如果指定了用户模型，则返回自定义用户模型，否则返回 <code>User</code>。</p><p>在为用户模型定义外键或多对多关系时，应使用 <code>AUTH_USER_MODEL</code> setting 指定自定义模型。例如：</p><pre data-lang="python">from&nbsp;django.conf&nbsp;import&nbsp;settings
from&nbsp;django.db&nbsp;import&nbsp;models

class&nbsp;Article(models.Model):
&nbsp;&nbsp;&nbsp;&nbsp;author&nbsp;=&nbsp;models.ForeignKey(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;settings.AUTH_USER_MODEL,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;on_delete=models.CASCADE,
&nbsp;&nbsp;&nbsp;&nbsp;)</pre><p>连接到用户模型发送的信号时，应使用 <code>AUTH_USER_MODEL</code> setting 指定自定义模型。例如：</p><pre data-lang="python">from&nbsp;django.conf&nbsp;import&nbsp;settings
from&nbsp;django.db.models.signals&nbsp;import&nbsp;post_save

def&nbsp;post_save_receiver(sender,&nbsp;instance,&nbsp;created,&nbsp;**kwargs):
&nbsp;&nbsp;&nbsp;&nbsp;pass

post_save.connect(post_save_receiver,&nbsp;sender=settings.AUTH_USER_MODEL)</pre><p>一般来说，用导入时执行的代码中的 <code>AUTH_USER_MODEL</code> setting 来引用用户模型是最容易的，但是，也可以在 Django 导入模型时调用 <code>get_user_model()</code>，以便使用 <code>models.ForeignKey(get_user_model(), ...)</code>。</p><p>如果您的应用使用多个用户模型进行测试，例如使用 <code>@override_settings(AUTH_USER_MODEL=...)</code>，并且将 <code>get_user_model()</code> 的结果缓存在模块级变量中，则可能需要侦听 <code>setting_changed</code> 信号以清除缓存。例如：</p><pre data-lang="python">from&nbsp;django.apps&nbsp;import&nbsp;apps
from&nbsp;django.contrib.auth&nbsp;import&nbsp;get_user_model
from&nbsp;django.core.signals&nbsp;import&nbsp;setting_changed
from&nbsp;django.dispatch&nbsp;import&nbsp;receiver

@receiver(setting_changed)
def&nbsp;user_model_swapped(**kwargs):
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;kwargs[&#39;setting&#39;]&nbsp;==&nbsp;&#39;AUTH_USER_MODEL&#39;:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apps.clear_cache()
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;myapp&nbsp;import&nbsp;some_module
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;some_module.UserModel&nbsp;=&nbsp;get_user_model()</pre><p></p>
                                    
                                </div>

                                <div class="container">
                                    <button type="button" class="btn btn-primary" title="加微信与站长交流" data-container="body" data-toggle="popover" data-placement="top" data-content="站长微信：VIPdjango">
                                        联系站长
                                    </button>

                                </div>
                                <script>
                                    $(function () {
                                        $("[data-toggle='popover']").popover();
                                    });
                                </script>

                                <div class="article__footer">
                                    <div class="tags"><b>上一篇：</b>
                                        
                                            <a href="show-15.html" class="article-tag">Django ORM常用操作介绍（新手必看）</a>
                                        

                                    </div>
                                    <div class="tags"><b>下一篇：</b>
                                        
                                            <a href="show-23.html" class="article-tag">django搭建blog,django快速搭建blog</a>
                                        
                                    </div>
                                </div>
                            </div>
                        </article>
                        <!--  广告位置 -->
                        <section id="comments">
                            <div class="comments__container">
                                <h3>文章评论 <span class="comment__count">0</span></h3>
                                
                                    <div class="comment__add">
                                        <div class="login-card">
                                            <a href="login1.html" class="btn btn-primary btn-login"><span>登录评论</span></a>
                                        </div>
                                    </div>
                                
                                </div>
                                
<div class="comments__list-wrapper">
<div id="comment__preview" style="display: none"></div>
<ul class="comments__list">
    
</ul>
</div>


                                <div class="comments--legacy"></div>
                        </section>
                    </div>
                    <aside class="col-md-3 hidden-sm hidden-xs">
                        <div class="article__author">
                            <div class="user">
                                <div class="profile__user-avatar" style="background-image: url('static/image/timg.jpg')"></div>
                                <div class="profile__info">
                                    <div class="profile__name">吴秀峰</div>
                                    <div class="badges"><span class="badge admin-badge" data-type="admin"></span></div>
                                    <!-- <div class="profile__karma" title="Karma: 113">113</div> -->
                                </div>
                                <div class="profile__description">
                                    <p>当你的才华和能力还不足以支撑你的野心的时候，静下心来，学习！</p>
                                </div>
                                <!--'data-hide=meta data-default=#default-links'-->
                                <ul class="profile__links" style="">
                                    <li class="profile__link-item change-github" data-change="github" style="display: none;" data-modify="href"><a href="#" target="_blank" rel="nofollow noreferrer noopener" title="Github URL"> <span class="link__icon link__icon--github"></span>
                                        <div class="change-github" data-change="github"></div>
                                    </a></li>
                                    <li class="profile__link-item change-twitter" data-change="twitter" style="display: none;" data-modify="href"><a href="#" target="_blank" rel="nofollow noreferrer noopener" title="Twitter URL"> <span class="link__icon link__icon--twitter"></span>
                                        <div class="change-twitter" data-change="twitter"></div>
                                    </a></li>
                                    <li class="profile__link-item change-website" data-change="website" style="display: none;" data-modify="href"><a href="#" target="_blank" rel="nofollow noreferrer noopener" title="Website URL"> <span class="link__icon link__icon--website"></span>
                                        <div class="change-website" data-change="website"></div>
                                    </a></li>
                                </ul>
                            </div>
                        </div>

                        <div class="row">
                            <div class="section sticky-content">
                                <div>
                                    <div class="sidebar-articles-group">
                                        <div class="group-title"><strong>最新文章</strong> <a href="article.html">更多</a></div>
                                        <ul class="list-group">
                                            
                                                <li>

                                                    <a href="show-39.html">
                                                        <div class="list__left image-wrapper">
                                                            <div class="article__image" style="background-image: url('static/image/12653.png')"></div>

                                                        </div>
                                                        <div class="list__right">
                                                            <h4>Django5.0正式发布，是你期待的吗？</h4>
                                                        </div>
                                                    </a>
                                                </li>
                                            
                                                <li>

                                                    <a href="show-38.html">
                                                        <div class="list__left image-wrapper">
                                                            <div class="article__image" style="background-image: url('static/image/chatgpt.jpg')"></div>

                                                        </div>
                                                        <div class="list__right">
                                                            <h4>新手如何用Python玩转ChatGPT API,详细讲解</h4>
                                                        </div>
                                                    </a>
                                                </li>
                                            
                                                <li>

                                                    <a href="show-37.html">
                                                        <div class="list__left image-wrapper">
                                                            <div class="article__image" style="background-image: url('static/image/drf.jpg')"></div>

                                                        </div>
                                                        <div class="list__right">
                                                            <h4>几个例子让新手快速了解Django REST Framework (DRF)</h4>
                                                        </div>
                                                    </a>
                                                </li>
                                            
                                                <li>

                                                    <a href="show-36.html">
                                                        <div class="list__left image-wrapper">
                                                            <div class="article__image" style="background-image: url('static/image/python232323.jpg')"></div>

                                                        </div>
                                                        <div class="list__right">
                                                            <h4>提升效率,python的多线程详细使用方法</h4>
                                                        </div>
                                                    </a>
                                                </li>
                                            
                                                <li>

                                                    <a href="show-35.html">
                                                        <div class="list__left image-wrapper">
                                                            <div class="article__image" style="background-image: url('static/image/djangoQ_Z4PNibz.jpg')"></div>

                                                        </div>
                                                        <div class="list__right">
                                                            <h4>Django-Q，轻量级消息队列Django-Q初体验</h4>
                                                        </div>
                                                    </a>
                                                </li>
                                            
                                                <li>

                                                    <a href="show-34.html">
                                                        <div class="list__left image-wrapper">
                                                            <div class="article__image" style="background-image: url('static/image/Paginator.jpg')"></div>

                                                        </div>
                                                        <div class="list__right">
                                                            <h4>简单讲解Django分页Paginator和Page的用法</h4>
                                                        </div>
                                                    </a>
                                                </li>
                                            
                                                <li>

                                                    <a href="show-33.html">
                                                        <div class="list__left image-wrapper">
                                                            <div class="article__image" style="background-image: url('https://www.django.cn/static/images/article_default.png')"></div>

                                                        </div>
                                                        <div class="list__right">
                                                            <h4>django4.0版本到底有哪些新功能和特性？</h4>
                                                        </div>
                                                    </a>
                                                </li>
                                            
                                                <li>

                                                    <a href="show-32.html">
                                                        <div class="list__left image-wrapper">
                                                            <div class="article__image" style="background-image: url('static/image/bushu.jpg')"></div>

                                                        </div>
                                                        <div class="list__right">
                                                            <h4>Django+uWSGI+nginx部署原理及工作流程</h4>
                                                        </div>
                                                    </a>
                                                </li>
                                            
                                                <li>

                                                    <a href="show-31.html">
                                                        <div class="list__left image-wrapper">
                                                            <div class="article__image" style="background-image: url('static/image/django-blog.jpg')"></div>

                                                        </div>
                                                        <div class="list__right">
                                                            <h4>Django入门视频教程之Blog开发详解</h4>
                                                        </div>
                                                    </a>
                                                </li>
                                            
                                                <li>

                                                    <a href="show-30.html">
                                                        <div class="list__left image-wrapper">
                                                            <div class="article__image" style="background-image: url('static/image/bt_django.jpg')"></div>

                                                        </div>
                                                        <div class="list__right">
                                                            <h4>使用宝塔面板快速部署Django项目</h4>
                                                        </div>
                                                    </a>
                                                </li>
                                            

                                        </ul>
                                    </div>
                                    <div class="sidebar-articles-group">
                                        <div class="group-title"><strong>论坛新帖</strong> <a href="forum.html">更多</a></div>
                                        <ul class="list-group">
                                            
                                                <li>
                                                    <a href="forum-69779.html" class="list-group-item article-sidebar-link">
                                                        <div class="list__left image-wrapper">
                                                            <div class="article__image" style="background-image: url('static/image/default.gif')"></div>
                                                            <!-- <img src="picture/add-input-mask-200_3.png" alt="" /> -->
                                                        </div>
                                                        <div class="list__right">
                                                            <h4>123</h4>
                                                        </div>
                                                    </a>
                                                </li>
                                            
                                                <li>
                                                    <a href="forum-69749.html" class="list-group-item article-sidebar-link">
                                                        <div class="list__left image-wrapper">
                                                            <div class="article__image" style="background-image: url('static/image/default.gif')"></div>
                                                            <!-- <img src="picture/add-input-mask-200_3.png" alt="" /> -->
                                                        </div>
                                                        <div class="list__right">
                                                            <h4>为什么每次只能导入一行数据呢？</h4>
                                                        </div>
                                                    </a>
                                                </li>
                                            
                                                <li>
                                                    <a href="forum-69325.html" class="list-group-item article-sidebar-link">
                                                        <div class="list__left image-wrapper">
                                                            <div class="article__image" style="background-image: url('static/image/default.gif')"></div>
                                                            <!-- <img src="picture/add-input-mask-200_3.png" alt="" /> -->
                                                        </div>
                                                        <div class="list__right">
                                                            <h4>请教下django查询问题，开始时间2023-7-15 00:00:00 结束时间2023-7-20 23:59:59，查询统计出每天的数据总和，并输出这几天每天的总和</h4>
                                                        </div>
                                                    </a>
                                                </li>
                                            
                                                <li>
                                                    <a href="forum-69324.html" class="list-group-item article-sidebar-link">
                                                        <div class="list__left image-wrapper">
                                                            <div class="article__image" style="background-image: url('static/image/default.gif')"></div>
                                                            <!-- <img src="picture/add-input-mask-200_3.png" alt="" /> -->
                                                        </div>
                                                        <div class="list__right">
                                                            <h4>请教：Invalid block tag on line 51: &#x27;empty&#x27;. Did you forget to register or load this tag?</h4>
                                                        </div>
                                                    </a>
                                                </li>
                                            
                                                <li>
                                                    <a href="forum-69323.html" class="list-group-item article-sidebar-link">
                                                        <div class="list__left image-wrapper">
                                                            <div class="article__image" style="background-image: url('static/image/default.gif')"></div>
                                                            <!-- <img src="picture/add-input-mask-200_3.png" alt="" /> -->
                                                        </div>
                                                        <div class="list__right">
                                                            <h4>Django如何实现视图函数被调用之后异步回调</h4>
                                                        </div>
                                                    </a>
                                                </li>
                                            
                                                <li>
                                                    <a href="forum-68919.html" class="list-group-item article-sidebar-link">
                                                        <div class="list__left image-wrapper">
                                                            <div class="article__image" style="background-image: url('static/image/default.gif')"></div>
                                                            <!-- <img src="picture/add-input-mask-200_3.png" alt="" /> -->
                                                        </div>
                                                        <div class="list__right">
                                                            <h4>我在用Django过程中碰到一个棘手的问题，关于SESSION_COOKIE_AGE</h4>
                                                        </div>
                                                    </a>
                                                </li>
                                            
                                                <li>
                                                    <a href="forum-68918.html" class="list-group-item article-sidebar-link">
                                                        <div class="list__left image-wrapper">
                                                            <div class="article__image" style="background-image: url('static/image/avatar_-_副本.jpg')"></div>
                                                            <!-- <img src="picture/add-input-mask-200_3.png" alt="" /> -->
                                                        </div>
                                                        <div class="list__right">
                                                            <h4>求教Python小版本更新升级</h4>
                                                        </div>
                                                    </a>
                                                </li>
                                            
                                                <li>
                                                    <a href="forum-68846.html" class="list-group-item article-sidebar-link">
                                                        <div class="list__left image-wrapper">
                                                            <div class="article__image" style="background-image: url('static/image/default.gif')"></div>
                                                            <!-- <img src="picture/add-input-mask-200_3.png" alt="" /> -->
                                                        </div>
                                                        <div class="list__right">
                                                            <h4>在pycharm中运行Django如何解决呢？</h4>
                                                        </div>
                                                    </a>
                                                </li>
                                            
                                                <li>
                                                    <a href="forum-68845.html" class="list-group-item article-sidebar-link">
                                                        <div class="list__left image-wrapper">
                                                            <div class="article__image" style="background-image: url('static/image/default.gif')"></div>
                                                            <!-- <img src="picture/add-input-mask-200_3.png" alt="" /> -->
                                                        </div>
                                                        <div class="list__right">
                                                            <h4>项目启动失败</h4>
                                                        </div>
                                                    </a>
                                                </li>
                                            
                                                <li>
                                                    <a href="forum-68844.html" class="list-group-item article-sidebar-link">
                                                        <div class="list__left image-wrapper">
                                                            <div class="article__image" style="background-image: url('static/image/default.gif')"></div>
                                                            <!-- <img src="picture/add-input-mask-200_3.png" alt="" /> -->
                                                        </div>
                                                        <div class="list__right">
                                                            <h4>json解析错误</h4>
                                                        </div>
                                                    </a>
                                                </li>
                                            

                                        </ul>
                                    </div>
                                </div>
                            <div class="sidebar-articles-group sidebar-videos">
                                    <div class="group-title">
                                        <strong>视频教程</strong>
                                        <a class="subscribe-link" target="_blank" href="video.html">更多</a>
                                    </div>
                                    <ul class="sidebar-video-thumbnails">
                                        
                                        <li>
                                            <a target="_blank" href="video-3.html">
                                                <img class="video-thumb" src="static/picture/api.jpg">
                                            </a>
                                            <a target="_blank" href="video-3.html">
                                                <h4 class="video-title">Django+DRF+Vue打造专业的API自动化测试平台</h4>
                                            </a>
                                        </li>
                                        
                                        <li>
                                            <a target="_blank" href="video-2.html">
                                                <img class="video-thumb" src="static/picture/djangovue_H3w7CBm.jpg">
                                            </a>
                                            <a target="_blank" href="video-2.html">
                                                <h4 class="video-title">django+vue前后端分离仿美团外卖电商项目</h4>
                                            </a>
                                        </li>
                                        
                                        <li>
                                            <a target="_blank" href="video-1.html">
                                                <img class="video-thumb" src="static/picture/qiyekaifa.jpg">
                                            </a>
                                            <a target="_blank" href="video-1.html">
                                                <h4 class="video-title">django企业项目开发实战案例视频教程</h4>
                                            </a>
                                        </li>
                                        

                                    </ul>

                                </div>
                            </div>
                        </div>
                    </aside>
                </div>
            </div>
        </div>
    </main>

    
    <footer>
	 <h3>加入Django中文交流社区，分享交流，携手同行</h3>

	  <ul class="list-inline">
				<li><a href="index.html" class="neon">首 页</a></li>
				<li><a href="article.html" class="neon">文 章</a></li>
                <li><a href="course.html" class="neon">教 程</a></li>
                <li><a href="video.html" class="neon">视 频</a></li>
				<li><a href="forum.html" class="neon">社 区</a></li>
				<li><a href="about.html" class="neon">关于我们</a></li>
				<li><a href="contact.html" class="neon">联系我们</a></li>

	  </ul>

		<p class="copyright">Copyright © 2018 <a href="index1.html" target="_blank">django.cn</a>
			<span class="second-line">All Rights Reserved.</span><br>
            Powered by <a href="index.html">Django3</a><br>
           <a href="https://beian.miit.gov.cn" target="_blank">备案号：湘ICP备17023990号-1</a>
		</p>
</footer>

</div>

    <!-- JavaScripts -->

    <script type="text/javascript">

  $('#confirm-delete').on('show.bs.modal', function (event) {
  var button = $(event.relatedTarget) // Button that triggered the modal
  // var recipient = button.data('whatever') // Extract info from data-* attributes
  // If necessary, you could initiate an AJAX request here (and then do the updating in a callback).
  // Update the modal's content. We'll use jQuery here, but you could use a data binding library or other methods instead.
  var aid = button.data('aid')
  var id = button.data('id')
  var tag = button.data('tag')
  var modal = $(this)
  // modal.find('.modal-title').text('New message to ' + recipient)
  modal.find('input[name="aid"]').val(aid)
  modal.find('input[name="id"]').val(id)
  modal.find('input[name="tag"]').val(tag)

  // console.log('ok')
})

  // btn_delete_comment
  $('#btn_delete_comment').click(function(event){
    // var form = new FormData(document.getElementById("delete_comment"))
    // var pwd1 = $('#change-pwd [name="password1"]').val()
    console.log('in comment delete')
    var aid = $('#delete_comment [name="aid"]').val()
    var id = $('#delete_comment [name="id"]').val()
    var tag = $('#delete_comment [name="tag"]').val()
    var token = $('#delete_comment [name="csrfmiddlewaretoken"]').val()
    if(!tag){
        return
    }

    var form = new FormData();
    form.append("id", 'id');
    form.append("csrfmiddlewaretoken", token);
    form.append('method','delete')

        $.ajax({
            type: 'POST',
            url: '/comment/'+id+'/',
            // data:'json',
            processData: false,
            contentType: false,
            data: form,
            success: function(response) {
                if(tag == 'forum'){
                    window.location.href = '/forum/forum-'+aid+'.html';
                }
                if(tag == 'article'){
                    window.location.href = '/article/show-'+aid+'.html';
                }
                if(tag == 'course'){
                    window.location.href = '/course/show-'+aid+'.html';
                }
            }
        })
  })
</script>
 <script src="static/js/bundle.js"></script>
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
</body>
</html>
